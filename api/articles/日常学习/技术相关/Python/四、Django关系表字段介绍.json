{"title":"四、Django关系表字段介绍","slug":"日常学习/技术相关/Python/四、Django关系表字段介绍","date":"2020-01-28T16:00:04.000Z","updated":"2022-02-21T05:08:50.402Z","comments":true,"path":"api/articles/日常学习/技术相关/Python/四、Django关系表字段介绍.json","excerpt":null,"covers":null,"content":"<h1 id=\"关系表介绍及使用\"><a class=\"markdownIt-Anchor\" href=\"#关系表介绍及使用\"></a> 关系表介绍及使用</h1>\n<h2 id=\"一对一关系\"><a class=\"markdownIt-Anchor\" href=\"#一对一关系\"></a> 一对一关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>OneToOneField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'表名'</span><span class=\"token punctuation\">,</span>to_field<span class=\"token operator\">=</span><span class=\"token string\">'字段名'</span><span class=\"token punctuation\">,</span>on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>  \n<span class=\"token comment\">#on_delete:删除时的一些级联效果,to_field可以不写,默认是关联到另一张表的主键,on_delete在1.x版本的django中不用写,默认是级联删除的,2.x版本的django要写.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"增加数据\"><a class=\"markdownIt-Anchor\" href=\"#增加数据\"></a> 增加数据</h3>\n<h4 id=\"方式1\"><a class=\"markdownIt-Anchor\" href=\"#方式1\"></a> 方式1</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">new_author_detail <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        birthday<span class=\"token operator\">=</span><span class=\"token string\">'1979'</span><span class=\"token punctuation\">,</span>\n        telephone<span class=\"token operator\">=</span><span class=\"token string\">'138'</span><span class=\"token punctuation\">,</span>\n        addr<span class=\"token operator\">=</span><span class=\"token string\">'black'</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 方式1</span>\n    models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'王涛'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">#直接将对象赋值属性</span>\n        authorDetail<span class=\"token operator\">=</span>new_author_detail \n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方式2\"><a class=\"markdownIt-Anchor\" href=\"#方式2\"></a> 方式2</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">new_author_detail <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        birthday<span class=\"token operator\">=</span><span class=\"token string\">'1979'</span><span class=\"token punctuation\">,</span>\n        telephone<span class=\"token operator\">=</span><span class=\"token string\">'138'</span><span class=\"token punctuation\">,</span>\n        addr<span class=\"token operator\">=</span><span class=\"token string\">'black'</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 方式2</span>\n    models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'王涛'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n        authorDetail_id<span class=\"token operator\">=</span>new_author_detail<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span>\n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据\"><a class=\"markdownIt-Anchor\" href=\"#删除数据\"></a> 删除数据</h3>\n<p>表一外键关联到表二,表一删除,不影响表2,表2删除会影响表1</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"更新数据\"><a class=\"markdownIt-Anchor\" href=\"#更新数据\"></a> 更新数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'崔老师'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n        authorDetail<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        authorDetail_id<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n     <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"一对多关系\"><a class=\"markdownIt-Anchor\" href=\"#一对多关系\"></a> 一对多关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'表名'</span><span class=\"token punctuation\">,</span>to_field<span class=\"token operator\">=</span><span class=\"token string\">'字段名'</span><span class=\"token punctuation\">,</span>on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"增加数据-2\"><a class=\"markdownIt-Anchor\" href=\"#增加数据-2\"></a> 增加数据</h3>\n<h4 id=\"方式1-2\"><a class=\"markdownIt-Anchor\" href=\"#方式1-2\"></a> 方式1</h4>\n<p>外键关联的直接赋值为某个对象即可</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n    title<span class=\"token operator\">=</span><span class=\"token string\">'李帅'</span><span class=\"token punctuation\">,</span>\n    publishDate<span class=\"token operator\">=</span><span class=\"token string\">'2019-07-22'</span><span class=\"token punctuation\">,</span>\n    price<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    publishs<span class=\"token operator\">=</span>obj\n<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方式2-2\"><a class=\"markdownIt-Anchor\" href=\"#方式2-2\"></a> 方式2</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        title<span class=\"token operator\">=</span><span class=\"token string\">'李帅test'</span><span class=\"token punctuation\">,</span>\n        publishDate<span class=\"token operator\">=</span><span class=\"token string\">'2019-07-22'</span><span class=\"token punctuation\">,</span>\n        price<span class=\"token operator\">=</span><span class=\"token number\">3.5</span><span class=\"token punctuation\">,</span>\n        publishs_id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token comment\">#可以是整型，也可以是对象的属性（id）</span>\n        <span class=\"token comment\">#publishs_id=obj.id</span>\n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据-2\"><a class=\"markdownIt-Anchor\" href=\"#删除数据-2\"></a> 删除数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"更新数据-2\"><a class=\"markdownIt-Anchor\" href=\"#更新数据-2\"></a> 更新数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>\ntitle<span class=\"token operator\">=</span><span class=\"token string\">'B哥的往事2'</span><span class=\"token punctuation\">,</span>\npublishs<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\npublishs_id<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">#注意级联关系 不能乱改</span>\n\t<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"多对多关系\"><a class=\"markdownIt-Anchor\" href=\"#多对多关系\"></a> 多对多关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'另外一个表名'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#这是自动创建第三表</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"添加数据\"><a class=\"markdownIt-Anchor\" href=\"#添加数据\"></a> 添加数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    book_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据-3\"><a class=\"markdownIt-Anchor\" href=\"#删除数据-3\"></a> 删除数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#将某个特定的对象从被关联对象集合中去除。</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#情况与nid 6相关联的所有</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#添加表记录</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#先清空然后在设置</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'6'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#删除然后更新</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"示例\"><a class=\"markdownIt-Anchor\" href=\"#示例\"></a> 示例</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token comment\"># Create your models here.</span>\n\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token comment\"># Create your models here.</span>\n<span class=\"token comment\">#作者表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Author</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#比较常用的信息放到这个表里面</span>\n    name<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    age<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># authorDetail=models.OneToOneField(to=\"AuthorDetail\",to_field=\"nid\",on_delete=models.CASCADE)</span>\n    authorDetail<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>OneToOneField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'AuthorDetail'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#一对一到AuthorDetail表  生成为表字段之后,会自动变为authorDetail_id这样有一个名称</span>\n\n    <span class=\"token comment\"># 外键字段 -- 外键字段名_id</span>\n\n    <span class=\"token comment\"># foreign+unique</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>name\n\n<span class=\"token comment\">#作者详细信息表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorDetail</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    birthday<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># telephone=models.BigIntegerField()</span>\n    telephone<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    addr<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>addr\n\n\n<span class=\"token comment\">#出版社表   和 书籍表 是 一对多的关系</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Publish</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    city<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    email<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>EmailField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#charfield -- asdfasdf</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>name\n\n<span class=\"token comment\">#书籍表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    nid <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AutoField<span class=\"token punctuation\">(</span>primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    publishDate<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    price<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#decimal(16,2)</span>\n    publishs<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">\"Publish\"</span><span class=\"token punctuation\">)</span>\n    authors<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'Author'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>title<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","more":"<h1 id=\"关系表介绍及使用\"><a class=\"markdownIt-Anchor\" href=\"#关系表介绍及使用\"></a> 关系表介绍及使用</h1>\n<h2 id=\"一对一关系\"><a class=\"markdownIt-Anchor\" href=\"#一对一关系\"></a> 一对一关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>OneToOneField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'表名'</span><span class=\"token punctuation\">,</span>to_field<span class=\"token operator\">=</span><span class=\"token string\">'字段名'</span><span class=\"token punctuation\">,</span>on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>  \n<span class=\"token comment\">#on_delete:删除时的一些级联效果,to_field可以不写,默认是关联到另一张表的主键,on_delete在1.x版本的django中不用写,默认是级联删除的,2.x版本的django要写.</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"增加数据\"><a class=\"markdownIt-Anchor\" href=\"#增加数据\"></a> 增加数据</h3>\n<h4 id=\"方式1\"><a class=\"markdownIt-Anchor\" href=\"#方式1\"></a> 方式1</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">new_author_detail <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        birthday<span class=\"token operator\">=</span><span class=\"token string\">'1979'</span><span class=\"token punctuation\">,</span>\n        telephone<span class=\"token operator\">=</span><span class=\"token string\">'138'</span><span class=\"token punctuation\">,</span>\n        addr<span class=\"token operator\">=</span><span class=\"token string\">'black'</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 方式1</span>\n    models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'王涛'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">#直接将对象赋值属性</span>\n        authorDetail<span class=\"token operator\">=</span>new_author_detail \n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方式2\"><a class=\"markdownIt-Anchor\" href=\"#方式2\"></a> 方式2</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">new_author_detail <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        birthday<span class=\"token operator\">=</span><span class=\"token string\">'1979'</span><span class=\"token punctuation\">,</span>\n        telephone<span class=\"token operator\">=</span><span class=\"token string\">'138'</span><span class=\"token punctuation\">,</span>\n        addr<span class=\"token operator\">=</span><span class=\"token string\">'black'</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 方式2</span>\n    models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'王涛'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n        authorDetail_id<span class=\"token operator\">=</span>new_author_detail<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span>\n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据\"><a class=\"markdownIt-Anchor\" href=\"#删除数据\"></a> 删除数据</h3>\n<p>表一外键关联到表二,表一删除,不影响表2,表2删除会影响表1</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"更新数据\"><a class=\"markdownIt-Anchor\" href=\"#更新数据\"></a> 更新数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">'崔老师'</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token operator\">=</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n        authorDetail<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>AuthorDetail<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        authorDetail_id<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n     <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"一对多关系\"><a class=\"markdownIt-Anchor\" href=\"#一对多关系\"></a> 一对多关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'表名'</span><span class=\"token punctuation\">,</span>to_field<span class=\"token operator\">=</span><span class=\"token string\">'字段名'</span><span class=\"token punctuation\">,</span>on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"增加数据-2\"><a class=\"markdownIt-Anchor\" href=\"#增加数据-2\"></a> 增加数据</h3>\n<h4 id=\"方式1-2\"><a class=\"markdownIt-Anchor\" href=\"#方式1-2\"></a> 方式1</h4>\n<p>外键关联的直接赋值为某个对象即可</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n    title<span class=\"token operator\">=</span><span class=\"token string\">'李帅'</span><span class=\"token punctuation\">,</span>\n    publishDate<span class=\"token operator\">=</span><span class=\"token string\">'2019-07-22'</span><span class=\"token punctuation\">,</span>\n    price<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    publishs<span class=\"token operator\">=</span>obj\n<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"方式2-2\"><a class=\"markdownIt-Anchor\" href=\"#方式2-2\"></a> 方式2</h4>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>\n        title<span class=\"token operator\">=</span><span class=\"token string\">'李帅test'</span><span class=\"token punctuation\">,</span>\n        publishDate<span class=\"token operator\">=</span><span class=\"token string\">'2019-07-22'</span><span class=\"token punctuation\">,</span>\n        price<span class=\"token operator\">=</span><span class=\"token number\">3.5</span><span class=\"token punctuation\">,</span>\n        publishs_id<span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token comment\">#可以是整型，也可以是对象的属性（id）</span>\n        <span class=\"token comment\">#publishs_id=obj.id</span>\n    <span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据-2\"><a class=\"markdownIt-Anchor\" href=\"#删除数据-2\"></a> 删除数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodels<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"更新数据-2\"><a class=\"markdownIt-Anchor\" href=\"#更新数据-2\"></a> 更新数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>\ntitle<span class=\"token operator\">=</span><span class=\"token string\">'B哥的往事2'</span><span class=\"token punctuation\">,</span>\npublishs<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>Publish<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\npublishs_id<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">#注意级联关系 不能乱改</span>\n\t<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"多对多关系\"><a class=\"markdownIt-Anchor\" href=\"#多对多关系\"></a> 多对多关系</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">xx <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'另外一个表名'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#这是自动创建第三表</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"添加数据\"><a class=\"markdownIt-Anchor\" href=\"#添加数据\"></a> 添加数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    book_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"删除数据-3\"><a class=\"markdownIt-Anchor\" href=\"#删除数据-3\"></a> 删除数据</h3>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">book_obj <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>nid<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#将某个特定的对象从被关联对象集合中去除。</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#情况与nid 6相关联的所有</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#添加表记录</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#先清空然后在设置</span>\nbook_obj<span class=\"token punctuation\">.</span>authors<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'5'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'6'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#删除然后更新</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"示例\"><a class=\"markdownIt-Anchor\" href=\"#示例\"></a> 示例</h2>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token comment\"># Create your models here.</span>\n\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token comment\"># Create your models here.</span>\n<span class=\"token comment\">#作者表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Author</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#比较常用的信息放到这个表里面</span>\n    name<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    age<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># authorDetail=models.OneToOneField(to=\"AuthorDetail\",to_field=\"nid\",on_delete=models.CASCADE)</span>\n    authorDetail<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>OneToOneField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'AuthorDetail'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#一对一到AuthorDetail表  生成为表字段之后,会自动变为authorDetail_id这样有一个名称</span>\n\n    <span class=\"token comment\"># 外键字段 -- 外键字段名_id</span>\n\n    <span class=\"token comment\"># foreign+unique</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>name\n\n<span class=\"token comment\">#作者详细信息表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorDetail</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    birthday<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># telephone=models.BigIntegerField()</span>\n    telephone<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    addr<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">64</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>addr\n\n\n<span class=\"token comment\">#出版社表   和 书籍表 是 一对多的关系</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Publish</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    city<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    email<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>EmailField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#charfield -- asdfasdf</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>name\n\n<span class=\"token comment\">#书籍表</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Book</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    nid <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>AutoField<span class=\"token punctuation\">(</span>primary_key<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span> max_length<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span>\n    publishDate<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    price<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>DecimalField<span class=\"token punctuation\">(</span>max_digits<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>decimal_places<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">#decimal(16,2)</span>\n    publishs<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">\"Publish\"</span><span class=\"token punctuation\">)</span>\n    authors<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>to<span class=\"token operator\">=</span><span class=\"token string\">'Author'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>title<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":[{"name":"Python","path":"api/categories/Python.json"},{"name":"Django的ORM操作","path":"api/categories/Django的ORM操作.json"}],"tags":[{"name":"Python","path":"api/tags/Python.json"},{"name":"Django","path":"api/tags/Django.json"}]}