{"title":"八、NPM包管理","slug":"日常学习/技术相关/大前端/Node.js/八、NPM包管理","date":"2020-07-04T10:17:58.000Z","updated":"2022-02-21T06:11:10.032Z","comments":true,"path":"api/articles/日常学习/技术相关/大前端/Node.js/八、NPM包管理.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/de8a6bdc4269e1ce19b64d7ece3abe1b.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/01bcf2340ef6ec6fe11f55c924418d22.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/5639ebeb64cdbdf9ae9146e15fb45a12.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/275bc71b9abafecfa2134fe776b957d9.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/0a4b8a9c78bfd5e8a82a85f4facf5b10.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/a88a21c91730fa74b2bc821ab9ba77ce.png"],"content":"<h2 id=\"如何写nodejs模块\"><a class=\"markdownIt-Anchor\" href=\"#如何写nodejs模块\"></a> 如何写NodeJs模块</h2>\n<ol>\n<li>遵守<code>CommonJS</code>规范。\n<ul>\n<li>导入模块</li>\n<li>暴露出去（导出）</li>\n</ul>\n</li>\n</ol>\n<p>一个简单的示例：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 定义一个对象</span>\n<span class=\"token keyword\">let</span> db <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    baseUrl<span class=\"token operator\">:</span> <span class=\"token string\">\"http://127.0.0.1:3000/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">insert</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"插入方法\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">delete</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除方法\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 将其暴露出去</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> db<span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在我们的模块中定义一个对象，并将其暴露出去。接下来在我们自己的js文件中去使用这个对象。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> myMoudle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./01-自己写的模块.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyMoudle<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/de8a6bdc4269e1ce19b64d7ece3abe1b.png\" alt=\"image-20200704183311332\" /></p>\n<h2 id=\"写一个自己的模块\"><a class=\"markdownIt-Anchor\" href=\"#写一个自己的模块\"></a> 写一个自己的模块</h2>\n<h2 id=\"npm发布包\"><a class=\"markdownIt-Anchor\" href=\"#npm发布包\"></a> NPM发布包</h2>\n<ol>\n<li>\n<p>进入待发布的目录，然后初始化目录<code>npm init</code>。并依次填入<strong>包名</strong>、<strong>版本</strong>、<strong>描述</strong>等信息。如果没有可以跳过（回车）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/01bcf2340ef6ec6fe11f55c924418d22.png\" alt=\"image-20200704190840715\" /></p>\n</li>\n<li>\n<p>注册NPM账号</p>\n<ul>\n<li>官方网址注册（推荐）</li>\n<li>使用<code>npm adduser</code>命令注册</li>\n</ul>\n</li>\n<li>\n<p>登录账号<code>npm login</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/5639ebeb64cdbdf9ae9146e15fb45a12.png\" alt=\"image-20200704192929433\" /></p>\n<ul>\n<li>如果使用了淘宝镜像须切换回官方源<code>npm config set registry https://registry.npmjs.org/</code></li>\n</ul>\n</li>\n<li>\n<p>发布包<code>npm publish</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/275bc71b9abafecfa2134fe776b957d9.png\" alt=\"image-20200704192323418\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/0a4b8a9c78bfd5e8a82a85f4facf5b10.png\" alt=\"image-20200704193040051\" /></p>\n<ul>\n<li>包名不能重复</li>\n<li>需要注意配置文件的<code>main</code>字段指定的为主文件。</li>\n<li>如果使用了淘宝镜像须切换回官方源<code>npm config set registry https://registry.npmjs.org/</code></li>\n</ul>\n</li>\n<li>\n<p>更新包</p>\n<ul>\n<li>\n<p>修改版本</p>\n</li>\n<li>\n<p>重新发布</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/a88a21c91730fa74b2bc821ab9ba77ce.png\" alt=\"image-20200704193537648\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>教程参考</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/taoerchun/article/details/82531549\">https://blog.csdn.net/taoerchun/article/details/82531549</a></li>\n</ul>\n</li>\n</ol>\n","more":"<h2 id=\"如何写nodejs模块\"><a class=\"markdownIt-Anchor\" href=\"#如何写nodejs模块\"></a> 如何写NodeJs模块</h2>\n<ol>\n<li>遵守<code>CommonJS</code>规范。\n<ul>\n<li>导入模块</li>\n<li>暴露出去（导出）</li>\n</ul>\n</li>\n</ol>\n<p>一个简单的示例：</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 定义一个对象</span>\n<span class=\"token keyword\">let</span> db <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n    baseUrl<span class=\"token operator\">:</span> <span class=\"token string\">\"http://127.0.0.1:3000/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">insert</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"插入方法\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">delete</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"删除方法\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 将其暴露出去</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> db<span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>在我们的模块中定义一个对象，并将其暴露出去。接下来在我们自己的js文件中去使用这个对象。</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> myMoudle <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./01-自己写的模块.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyMoudle<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/de8a6bdc4269e1ce19b64d7ece3abe1b.png\" alt=\"image-20200704183311332\" /></p>\n<h2 id=\"写一个自己的模块\"><a class=\"markdownIt-Anchor\" href=\"#写一个自己的模块\"></a> 写一个自己的模块</h2>\n<h2 id=\"npm发布包\"><a class=\"markdownIt-Anchor\" href=\"#npm发布包\"></a> NPM发布包</h2>\n<ol>\n<li>\n<p>进入待发布的目录，然后初始化目录<code>npm init</code>。并依次填入<strong>包名</strong>、<strong>版本</strong>、<strong>描述</strong>等信息。如果没有可以跳过（回车）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/01bcf2340ef6ec6fe11f55c924418d22.png\" alt=\"image-20200704190840715\" /></p>\n</li>\n<li>\n<p>注册NPM账号</p>\n<ul>\n<li>官方网址注册（推荐）</li>\n<li>使用<code>npm adduser</code>命令注册</li>\n</ul>\n</li>\n<li>\n<p>登录账号<code>npm login</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/5639ebeb64cdbdf9ae9146e15fb45a12.png\" alt=\"image-20200704192929433\" /></p>\n<ul>\n<li>如果使用了淘宝镜像须切换回官方源<code>npm config set registry https://registry.npmjs.org/</code></li>\n</ul>\n</li>\n<li>\n<p>发布包<code>npm publish</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/275bc71b9abafecfa2134fe776b957d9.png\" alt=\"image-20200704192323418\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/0a4b8a9c78bfd5e8a82a85f4facf5b10.png\" alt=\"image-20200704193040051\" /></p>\n<ul>\n<li>包名不能重复</li>\n<li>需要注意配置文件的<code>main</code>字段指定的为主文件。</li>\n<li>如果使用了淘宝镜像须切换回官方源<code>npm config set registry https://registry.npmjs.org/</code></li>\n</ul>\n</li>\n<li>\n<p>更新包</p>\n<ul>\n<li>\n<p>修改版本</p>\n</li>\n<li>\n<p>重新发布</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/04/a88a21c91730fa74b2bc821ab9ba77ce.png\" alt=\"image-20200704193537648\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>教程参考</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/taoerchun/article/details/82531549\">https://blog.csdn.net/taoerchun/article/details/82531549</a></li>\n</ul>\n</li>\n</ol>\n","categories":[{"name":"大前端","path":"api/categories/大前端.json"},{"name":"NodeJs","path":"api/categories/NodeJs.json"}],"tags":[{"name":"大前端","path":"api/tags/大前端.json"},{"name":"笔记","path":"api/tags/笔记.json"},{"name":"NodeJs","path":"api/tags/NodeJs.json"},{"name":"npm包管理","path":"api/tags/npm包管理.json"}]}