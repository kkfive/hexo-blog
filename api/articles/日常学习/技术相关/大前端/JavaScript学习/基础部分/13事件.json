{"title":"13事件","slug":"日常学习/技术相关/大前端/JavaScript学习/基础部分/13事件","date":"2020-04-23T10:49:58.000Z","updated":"2022-02-21T07:18:57.057Z","comments":true,"path":"api/articles/日常学习/技术相关/大前端/JavaScript学习/基础部分/13事件.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/225f45a8766c5b817c1aaa466f79d63b.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/776ed6c06b8288142eea8b5c5215ab18.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/396403bd290b5f3002dc778bb00ebf6a.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/a677afc4ad9f37da81c7209c42138dc7.png"],"content":"<h2 id=\"事件类型\"><a class=\"markdownIt-Anchor\" href=\"#事件类型\"></a> 事件类型</h2>\n<ul>\n<li>\n<p>依赖于设备的输入事件：键盘事件和鼠标事件，这些事件都是直接和设备相关的。</p>\n</li>\n<li>\n<p>独立于设备的输入事件：例如cick事件等，这些事件并没有直接与设备相关</p>\n</li>\n<li>\n<p>用户界面的相关事件：用户界面事件属于较高级的事件，一般多用于表单中的组件。状</p>\n</li>\n<li>\n<p>变化的相关事件：这些事件与用户行为无关，而是由网络或浏览器触发的。</p>\n</li>\n<li>\n<p>特定API事件：这些事件多用于特定场景的实现，例如 HTML5中提供的拖放API中的事件等</p>\n</li>\n<li>\n<p>与错误处理的相关事件</p>\n</li>\n</ul>\n<h2 id=\"注册事件\"><a class=\"markdownIt-Anchor\" href=\"#注册事件\"></a> 注册事件</h2>\n<p>注册事件指：就是将 <code>Javascript</code>函数与指定的事件相关联。</p>\n<p>句柄：被绑定的函数成为该事件的句柄。</p>\n<ol>\n<li>\n<p>通过事件属性</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fn()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'你终于点击了我'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>DOM中相关对象提供的事件属性</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">var</span> btn2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn2'</span><span class=\"token punctuation\">)</span>\n    btn2<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'你终于点击了我'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">// 如果为某个事件指定的处理函数是已定义好的，只写函数名，不能有小括号</span>\n    btn2<span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> fn\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>为指定元素添加事件监听器</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">var</span> btn3 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn3'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 添加事件</span>\n    btn3<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 移除事件</span>\n    btn3<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>其中<code>addEventListener(eventName,functionName,capture)</code>，参数分别如下：</p>\n<ul>\n<li>\n<p>eventName</p>\n<p>为元素指定具体的事件名称（例如单击事件是 clicke等）</p>\n</li>\n<li>\n<p>functionName</p>\n<p>注册事件的句柄</p>\n</li>\n<li>\n<p>capture</p>\n<p>设置事件是捕获阶段还是冒泡阶段。 false为默认值，表示冒泡阶段</p>\n</li>\n</ul>\n<blockquote>\n<p>IE8中提供的事件监听器为：<code>element.attachEvent(eventName,functionName)</code></p>\n<ul>\n<li><code>eventName</code>：为元素指定具体的事件名称（例如单击事件是 click等）</li>\n<li><code>functionName</code>：注册事件的句柄</li>\n</ul>\n</blockquote>\n</li>\n</ol>\n<p>事件中的<code>this</code>，当使用 <code>addeventlistener()</code>方法为某个HTML页面元素注册事件的时候，this就指代注册事件的元素。</p>\n<h2 id=\"移除注册事件\"><a class=\"markdownIt-Anchor\" href=\"#移除注册事件\"></a> 移除注册事件</h2>\n<p>移除事件只有<code>removeEventListener()</code>，DOM标准规范提供的 removeEvenListener()方法，调用该方法表示向指定元素移除事件监听器。</p>\n<p><code>element.removeEvenListener(eventName,functionName,capture)</code></p>\n<ul>\n<li>\n<p><code>eventName</code></p>\n<p>表示移除的事件名称（例如单击事件是 click等）</p>\n</li>\n<li>\n<p><code>functionName</code></p>\n<p>注册事件的句柄（之前使用 addeventlistener0方法定义的）</p>\n</li>\n<li>\n<p><code>capture</code></p>\n<p>设置事件是捕获阶段还是冒泡阶段。flkc为默认值，表示冒泡阶段</p>\n</li>\n</ul>\n<h2 id=\"even事件对象\"><a class=\"markdownIt-Anchor\" href=\"#even事件对象\"></a> Even事件对象</h2>\n<p>为HTML页面中的元素注册事件时，事件的处理函数具体一个参数，该参数就是 Event事件对象Event事件对象中包含了该事件的信息，以及该事件发生在哪个元素上</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> liElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'link'</span><span class=\"token punctuation\">)</span>\nliElement<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">/*\n                target属性：触发当前事件的目标元素\n                currentTarget属性：绑定当前事件的目标元素\n                this:与currentTarget属性一致\n            */</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">属性或方法</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>target</code></td>\n<td style=\"text-align:center\">表示触发当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>currentTarget</code></td>\n<td style=\"text-align:center\">表示注册当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>srcElement</code></td>\n<td style=\"text-align:center\">E8及之前版本浏览器支持，表示触发当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>returnValue</code></td>\n<td style=\"text-align:center\">E8及之前版本浏览器支持，表示取消当前事件的默认行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>cancelBubble</code></td>\n<td style=\"text-align:center\">E8及之前版本测览器支持，表示阻止当前事件的冒泡行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>preventDefault</code></td>\n<td style=\"text-align:center\">表示取消当前事件的默认行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>stopPropagation</code></td>\n<td style=\"text-align:center\">表示阻止当前事件的冒泡行为</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"获取目标元素\"><a class=\"markdownIt-Anchor\" href=\"#获取目标元素\"></a> 获取目标元素</h2>\n<ol>\n<li>\n<p><code>target</code></p>\n<p>用于获取触发当前事件的HTML元素</p>\n</li>\n<li>\n<p><code>currentTarget</code></p>\n<p>用于获取当前事件的HTML元素</p>\n</li>\n</ol>\n<h2 id=\"默认行为\"><a class=\"markdownIt-Anchor\" href=\"#默认行为\"></a> 默认行为</h2>\n<p>什么是默认行为：</p>\n<ul>\n<li><code>&lt;a&gt;</code>标签跳转功能</li>\n<li><code>&lt;form&gt;</code>元素中点击<code>&lt;input type='submit'&gt;</code>提交按钮时，提交表单功能</li>\n<li>输入框的输入文本内容功能</li>\n<li>单选框或复选框的切换选项功能。</li>\n</ul>\n<ol>\n<li>\n<p><code>preventDefault</code></p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">var</span> link <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'link'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 1. Event事件对象preventDefault()方法</span>\n    link<span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> function <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p><code>return false</code></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 2. 函数return语句</span>\nlink<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n</ol>\n<h2 id=\"获取鼠标坐标\"><a class=\"markdownIt-Anchor\" href=\"#获取鼠标坐标\"></a> 获取鼠标坐标</h2>\n<ul>\n<li>\n<p><code>pageX</code>和<code>pageY</code></p>\n<p>表示鼠标在整个页面中的位置。如果页面过大（存在滚动条），部分页面可能存在可视区域之外。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/225f45a8766c5b817c1aaa466f79d63b.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>clientX</code>和<code>clientY</code></p>\n<p>表示鼠标在整个可视区域中的位置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/776ed6c06b8288142eea8b5c5215ab18.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>screenX</code>和<code>screenY</code></p>\n<p>表示鼠标在整个屏幕中的位置。从屏幕（不是浏览器）的左上角开始计算。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/396403bd290b5f3002dc778bb00ebf6a.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>offsetX</code>和<code>offsetY</code></p>\n<p>表示鼠标相对于定位父元素的位置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/a677afc4ad9f37da81c7209c42138dc7.png\" alt=\"image-20200423194615616\" /></p>\n</li>\n</ul>\n<h2 id=\"事件流\"><a class=\"markdownIt-Anchor\" href=\"#事件流\"></a> 事件流</h2>\n<ol>\n<li>\n<p>捕获阶段（网景公司提出）</p>\n<p>按照DOM树结构由 documenti对象向下的顺序传播，直到目标元素为止</p>\n</li>\n<li>\n<p>目标阶段</p>\n<p>该阶段就是指目标元素触发当前事件。</p>\n</li>\n<li>\n<p>冒泡阶段</p>\n<p>按照DOM树结构由目标元素向上的顺序传播，直到document对象为止。</p>\n</li>\n</ol>\n<p>取消事件冒泡</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> box1 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> box2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> box3 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 第三个参数：默认值 false 表示冒泡阶段；true 表示捕获阶段</span>\nbox1<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\nbox2<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\nbox2<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box3'</span><span class=\"token punctuation\">)</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"事件委托\"><a class=\"markdownIt-Anchor\" href=\"#事件委托\"></a> 事件委托</h2>\n<p>当为大量的HTML元素注册相同事件，并且事件的句柄逻辑完全相同时，会造成页面速度下降。不过，事件流允许在这些HTML元素的共同父级元素注册事件。这种方式被称为事件委托</p>\n<ul>\n<li>\n<p>适用于新创建的元素</p>\n<p>如果向DOM树结构中添加新的元素，那么不需要再向这个新元素注册相同事件。因为注册事件已经委托给了该元素的祖先元素完成。</p>\n</li>\n<li>\n<p>简化逻辑代码</p>\n<p>这种方式只需要祖先元素一次注册事件，而不需要分别为大量元素注册事件。使得逻辑代码的性能提高，也更加容易维护</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">city<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>nodeName <span class=\"token operator\">===</span> <span class=\"token string\">'LI'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'666'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","more":"<h2 id=\"事件类型\"><a class=\"markdownIt-Anchor\" href=\"#事件类型\"></a> 事件类型</h2>\n<ul>\n<li>\n<p>依赖于设备的输入事件：键盘事件和鼠标事件，这些事件都是直接和设备相关的。</p>\n</li>\n<li>\n<p>独立于设备的输入事件：例如cick事件等，这些事件并没有直接与设备相关</p>\n</li>\n<li>\n<p>用户界面的相关事件：用户界面事件属于较高级的事件，一般多用于表单中的组件。状</p>\n</li>\n<li>\n<p>变化的相关事件：这些事件与用户行为无关，而是由网络或浏览器触发的。</p>\n</li>\n<li>\n<p>特定API事件：这些事件多用于特定场景的实现，例如 HTML5中提供的拖放API中的事件等</p>\n</li>\n<li>\n<p>与错误处理的相关事件</p>\n</li>\n</ul>\n<h2 id=\"注册事件\"><a class=\"markdownIt-Anchor\" href=\"#注册事件\"></a> 注册事件</h2>\n<p>注册事件指：就是将 <code>Javascript</code>函数与指定的事件相关联。</p>\n<p>句柄：被绑定的函数成为该事件的句柄。</p>\n<ol>\n<li>\n<p>通过事件属性</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fn()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'你终于点击了我'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>DOM中相关对象提供的事件属性</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">var</span> btn2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn2'</span><span class=\"token punctuation\">)</span>\n    btn2<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'你终于点击了我'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">// 如果为某个事件指定的处理函数是已定义好的，只写函数名，不能有小括号</span>\n    btn2<span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> fn\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p>为指定元素添加事件监听器</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>按钮<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">var</span> btn3 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'btn3'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 添加事件</span>\n    btn3<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 移除事件</span>\n    btn3<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>其中<code>addEventListener(eventName,functionName,capture)</code>，参数分别如下：</p>\n<ul>\n<li>\n<p>eventName</p>\n<p>为元素指定具体的事件名称（例如单击事件是 clicke等）</p>\n</li>\n<li>\n<p>functionName</p>\n<p>注册事件的句柄</p>\n</li>\n<li>\n<p>capture</p>\n<p>设置事件是捕获阶段还是冒泡阶段。 false为默认值，表示冒泡阶段</p>\n</li>\n</ul>\n<blockquote>\n<p>IE8中提供的事件监听器为：<code>element.attachEvent(eventName,functionName)</code></p>\n<ul>\n<li><code>eventName</code>：为元素指定具体的事件名称（例如单击事件是 click等）</li>\n<li><code>functionName</code>：注册事件的句柄</li>\n</ul>\n</blockquote>\n</li>\n</ol>\n<p>事件中的<code>this</code>，当使用 <code>addeventlistener()</code>方法为某个HTML页面元素注册事件的时候，this就指代注册事件的元素。</p>\n<h2 id=\"移除注册事件\"><a class=\"markdownIt-Anchor\" href=\"#移除注册事件\"></a> 移除注册事件</h2>\n<p>移除事件只有<code>removeEventListener()</code>，DOM标准规范提供的 removeEvenListener()方法，调用该方法表示向指定元素移除事件监听器。</p>\n<p><code>element.removeEvenListener(eventName,functionName,capture)</code></p>\n<ul>\n<li>\n<p><code>eventName</code></p>\n<p>表示移除的事件名称（例如单击事件是 click等）</p>\n</li>\n<li>\n<p><code>functionName</code></p>\n<p>注册事件的句柄（之前使用 addeventlistener0方法定义的）</p>\n</li>\n<li>\n<p><code>capture</code></p>\n<p>设置事件是捕获阶段还是冒泡阶段。flkc为默认值，表示冒泡阶段</p>\n</li>\n</ul>\n<h2 id=\"even事件对象\"><a class=\"markdownIt-Anchor\" href=\"#even事件对象\"></a> Even事件对象</h2>\n<p>为HTML页面中的元素注册事件时，事件的处理函数具体一个参数，该参数就是 Event事件对象Event事件对象中包含了该事件的信息，以及该事件发生在哪个元素上</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> liElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'link'</span><span class=\"token punctuation\">)</span>\nliElement<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">/*\n                target属性：触发当前事件的目标元素\n                currentTarget属性：绑定当前事件的目标元素\n                this:与currentTarget属性一致\n            */</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">属性或方法</th>\n<th style=\"text-align:center\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><code>target</code></td>\n<td style=\"text-align:center\">表示触发当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>currentTarget</code></td>\n<td style=\"text-align:center\">表示注册当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>srcElement</code></td>\n<td style=\"text-align:center\">E8及之前版本浏览器支持，表示触发当前事件的HTML元素</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>returnValue</code></td>\n<td style=\"text-align:center\">E8及之前版本浏览器支持，表示取消当前事件的默认行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>cancelBubble</code></td>\n<td style=\"text-align:center\">E8及之前版本测览器支持，表示阻止当前事件的冒泡行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>preventDefault</code></td>\n<td style=\"text-align:center\">表示取消当前事件的默认行为</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><code>stopPropagation</code></td>\n<td style=\"text-align:center\">表示阻止当前事件的冒泡行为</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"获取目标元素\"><a class=\"markdownIt-Anchor\" href=\"#获取目标元素\"></a> 获取目标元素</h2>\n<ol>\n<li>\n<p><code>target</code></p>\n<p>用于获取触发当前事件的HTML元素</p>\n</li>\n<li>\n<p><code>currentTarget</code></p>\n<p>用于获取当前事件的HTML元素</p>\n</li>\n</ol>\n<h2 id=\"默认行为\"><a class=\"markdownIt-Anchor\" href=\"#默认行为\"></a> 默认行为</h2>\n<p>什么是默认行为：</p>\n<ul>\n<li><code>&lt;a&gt;</code>标签跳转功能</li>\n<li><code>&lt;form&gt;</code>元素中点击<code>&lt;input type='submit'&gt;</code>提交按钮时，提交表单功能</li>\n<li>输入框的输入文本内容功能</li>\n<li>单选框或复选框的切换选项功能。</li>\n</ul>\n<ol>\n<li>\n<p><code>preventDefault</code></p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">var</span> link <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'link'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// 1. Event事件对象preventDefault()方法</span>\n    link<span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> function <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li>\n<p><code>return false</code></p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 2. 函数return语句</span>\nlink<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n</ol>\n<h2 id=\"获取鼠标坐标\"><a class=\"markdownIt-Anchor\" href=\"#获取鼠标坐标\"></a> 获取鼠标坐标</h2>\n<ul>\n<li>\n<p><code>pageX</code>和<code>pageY</code></p>\n<p>表示鼠标在整个页面中的位置。如果页面过大（存在滚动条），部分页面可能存在可视区域之外。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/225f45a8766c5b817c1aaa466f79d63b.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>clientX</code>和<code>clientY</code></p>\n<p>表示鼠标在整个可视区域中的位置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/776ed6c06b8288142eea8b5c5215ab18.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>screenX</code>和<code>screenY</code></p>\n<p>表示鼠标在整个屏幕中的位置。从屏幕（不是浏览器）的左上角开始计算。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/396403bd290b5f3002dc778bb00ebf6a.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><code>offsetX</code>和<code>offsetY</code></p>\n<p>表示鼠标相对于定位父元素的位置。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/23/a677afc4ad9f37da81c7209c42138dc7.png\" alt=\"image-20200423194615616\" /></p>\n</li>\n</ul>\n<h2 id=\"事件流\"><a class=\"markdownIt-Anchor\" href=\"#事件流\"></a> 事件流</h2>\n<ol>\n<li>\n<p>捕获阶段（网景公司提出）</p>\n<p>按照DOM树结构由 documenti对象向下的顺序传播，直到目标元素为止</p>\n</li>\n<li>\n<p>目标阶段</p>\n<p>该阶段就是指目标元素触发当前事件。</p>\n</li>\n<li>\n<p>冒泡阶段</p>\n<p>按照DOM树结构由目标元素向上的顺序传播，直到document对象为止。</p>\n</li>\n</ol>\n<p>取消事件冒泡</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> box1 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> box2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> box3 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'box3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 第三个参数：默认值 false 表示冒泡阶段；true 表示捕获阶段</span>\nbox1<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box1'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\nbox2<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span>\nbox2<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is box3'</span><span class=\"token punctuation\">)</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"事件委托\"><a class=\"markdownIt-Anchor\" href=\"#事件委托\"></a> 事件委托</h2>\n<p>当为大量的HTML元素注册相同事件，并且事件的句柄逻辑完全相同时，会造成页面速度下降。不过，事件流允许在这些HTML元素的共同父级元素注册事件。这种方式被称为事件委托</p>\n<ul>\n<li>\n<p>适用于新创建的元素</p>\n<p>如果向DOM树结构中添加新的元素，那么不需要再向这个新元素注册相同事件。因为注册事件已经委托给了该元素的祖先元素完成。</p>\n</li>\n<li>\n<p>简化逻辑代码</p>\n<p>这种方式只需要祖先元素一次注册事件，而不需要分别为大量元素注册事件。使得逻辑代码的性能提高，也更加容易维护</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">city<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>nodeName <span class=\"token operator\">===</span> <span class=\"token string\">'LI'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'666'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":[{"name":"大前端","path":"api/categories/大前端.json"},{"name":"JavaScript笔记","path":"api/categories/JavaScript笔记.json"}],"tags":[{"name":"大前端","path":"api/tags/大前端.json"},{"name":"笔记","path":"api/tags/笔记.json"},{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}