{"title":"二、MongoDB基本操作及增删改查","slug":"日常学习/技术相关/MongoDB/二、MongoDB基本操作及增删改查","date":"2020-07-08T05:47:01.000Z","updated":"2022-02-21T05:08:50.402Z","comments":true,"path":"api/articles/日常学习/技术相关/MongoDB/二、MongoDB基本操作及增删改查.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3182a965d1dfd5bf1b062f0256cef82f.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/cd6cb40242715180b0caea722f3ada43.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/349774b3caed7941339ee109595ff191.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/d033db28289e9381b9a442e77826aefc.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/62e46049716993d198b9003bd8ccd43b.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3cfaece4b4e1031ef111f26001244e5f.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/bb2ce8d5056e575a3fb2c8535653114f.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/c72af3cd9c0145ece61d7aac83012e43.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/8a9bb3f1ad8158b015c5b6225e5d6fa1.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e7888cc7bf3ae4f09340e89e31495cc7.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/1b0cb2a21b807dcbc6e89e5990efded1.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/38a2830201c37f173bcfda8984bcf7a0.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/37fc37460378972c530e76ae3abf6965.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5fd7ebdc372dce37fefd36cc4f8944b6.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/158e14d8baa0f56abacd46c8ac274d31.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/91bcc38662f171c733a47f91935ceec2.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e05952c64636480315119749f616353d.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/6ba669b7d5bd0d6b99b11d4da6592f1f.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/43faf08cc186e600477e9a04522da222.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/ff0fa7ecaa6ad12231bdac18ebd67127.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5b54d3429f191c7360ad80a967ad0b53.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/7e5671d614ee683be4b966f49ac5cae2.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/fc39535e4d2e3f1a7cbec5b59c3e2063.png"],"content":"<h2 id=\"基本操作\"><a class=\"markdownIt-Anchor\" href=\"#基本操作\"></a> 基本操作</h2>\n<p>登陆数据库</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">mongo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"查看数据库\"><a class=\"markdownIt-Anchor\" href=\"#查看数据库\"></a> 查看数据库</h3>\n<p>语法</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">show</span> <span class=\"token keyword\">databases</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3182a965d1dfd5bf1b062f0256cef82f.png\" alt=\"image-20200708135132816\" /></p>\n<h3 id=\"选择数据库\"><a class=\"markdownIt-Anchor\" href=\"#选择数据库\"></a> 选择数据库</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> 数据库名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/cd6cb40242715180b0caea722f3ada43.png\" alt=\"image-20200708135204173\" /></p>\n<p>如果切换到一个没有的数据库，例如<code>use admin2</code>，那么会隐式创建这个数据库。（后期当该数据库有数据时，系统自动创建）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> admin2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/349774b3caed7941339ee109595ff191.png\" alt=\"image-20200708135402830\" /></p>\n<h3 id=\"查看集合\"><a class=\"markdownIt-Anchor\" href=\"#查看集合\"></a> 查看集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">show</span> collections<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/d033db28289e9381b9a442e77826aefc.png\" alt=\"image-20200708135654724\" /></p>\n<h3 id=\"创建集合\"><a class=\"markdownIt-Anchor\" href=\"#创建集合\"></a> 创建集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>createCollection<span class=\"token punctuation\">(</span><span class=\"token string\">'集合名'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/62e46049716993d198b9003bd8ccd43b.png\" alt=\"image-20200708135818996\" /></p>\n<h3 id=\"删除集合\"><a class=\"markdownIt-Anchor\" href=\"#删除集合\"></a> 删除集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">drop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3cfaece4b4e1031ef111f26001244e5f.png\" alt=\"image-20200708135904893\" /></p>\n<h3 id=\"删除数据库\"><a class=\"markdownIt-Anchor\" href=\"#删除数据库\"></a> 删除数据库</h3>\n<ol>\n<li>通过<code>use</code>语法选择数据</li>\n<li>通过<code>db.dropDataBase()</code>删除数据库</li>\n</ol>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/bb2ce8d5056e575a3fb2c8535653114f.png\" alt=\"image-20200708140359164\" /></p>\n<h2 id=\"增删改查\"><a class=\"markdownIt-Anchor\" href=\"#增删改查\"></a> 增删改查</h2>\n<h3 id=\"c增\"><a class=\"markdownIt-Anchor\" href=\"#c增\"></a> C增</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>JSON数据<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果集合存在，那么直接插入数据。如果集合不存在，那么会隐式创建。</p>\n<blockquote>\n<p>在test2数据库的c1集合中插入数据（姓名叫webopenfather年龄18岁）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> test2\ndb<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"webopenfather\"</span><span class=\"token punctuation\">,</span>age:<span class=\"token number\">18</span>&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<ul>\n<li>数据库和集合不存在都隐式创建</li>\n<li>对象的键统一不加引号（方便看），但是查看集合数据时系统会自动加</li>\n<li>mongodb会给每条数据增加一个全球唯一的<code>_id</code>键</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/c72af3cd9c0145ece61d7aac83012e43.png\" alt=\"image-20200708141215126\" /></p>\n</blockquote>\n<ol>\n<li>\n<p><code>_id</code>键的组成</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/8a9bb3f1ad8158b015c5b6225e5d6fa1.png\" alt=\"1584876662100\" /></p>\n</li>\n<li>\n<p>自己增加<code>_id</code></p>\n<p>可以，只需要给插入的JSON数据增加_id键即可覆盖（但实战强烈不推荐）</p>\n<p><code>db.c1.insert(&#123;_id:1, uname:&quot;webopenfather&quot;, age:18&#125;)</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e7888cc7bf3ae4f09340e89e31495cc7.png\" alt=\"image-20200708141526348\" /></p>\n</li>\n<li>\n<p>一次性插入多条数据</p>\n<p>传递数据，数组中写一个个JSON数据即可。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    &#123;uname:<span class=\"token string\">\"z3\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">3</span>&#125;<span class=\"token punctuation\">,</span>\n    &#123;uname:<span class=\"token string\">\"z4\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">4</span>&#125;<span class=\"token punctuation\">,</span>\n    &#123;uname:<span class=\"token string\">\"w5\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">5</span>&#125;\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/1b0cb2a21b807dcbc6e89e5990efded1.png\" alt=\"image-20200708141643413\" /></p>\n</li>\n<li>\n<p>快速插入10条数据</p>\n<p>由于mongodb底层使用JS引擎实现的，所以支持部分js语法。因此：可以写for循环</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>var i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span> &#123;\n    db<span class=\"token punctuation\">.</span>c2<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>&#123;uanme: <span class=\"token string\">\"a\"</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">,</span> age: i&#125;<span class=\"token punctuation\">)</span>\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/38a2830201c37f173bcfda8984bcf7a0.png\" alt=\"image-20200708142047091\" /></p>\n</li>\n</ol>\n<h3 id=\"r查询文档\"><a class=\"markdownIt-Anchor\" href=\"#r查询文档\"></a> R查询文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>查询的列<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">条件</th>\n<th style=\"text-align:center\">写法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">查询所有的数据</td>\n<td style=\"text-align:center\"><code>&#123;&#125;</code>或者不写</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">查询<code>age=6</code>的数据</td>\n<td style=\"text-align:center\"><code>&#123;age:6&#125;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">既要<code>age=6</code>又要性别=男</td>\n<td style=\"text-align:center\"><code>&#123;age:6,sex:'男'&#125;</code></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">查询的列（可选参数）</th>\n<th style=\"text-align:center\">写法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">查询全部列（字段）</td>\n<td style=\"text-align:center\">不写</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">只显示age列（字段）</td>\n<td style=\"text-align:center\"><code>&#123;age:1&#125;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">除了age列（字段）都显示</td>\n<td style=\"text-align:center\"><code>&#123;age:0&#125;</code></td>\n</tr>\n</tbody>\n</table>\n<p>其他语法</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;\n            键:&#123;运算符：值&#125;\n            &#125;<span class=\"token punctuation\">)</span> <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">运算符</th>\n<th style=\"text-align:center\">作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">$gt</td>\n<td style=\"text-align:center\">大于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$gte</td>\n<td style=\"text-align:center\">大于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$lt</td>\n<td style=\"text-align:center\">小于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$lte</td>\n<td style=\"text-align:center\">小于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$ne</td>\n<td style=\"text-align:center\">不等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$in</td>\n<td style=\"text-align:center\">in</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$nin</td>\n<td style=\"text-align:center\">not in</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"实例练习\"><a class=\"markdownIt-Anchor\" href=\"#实例练习\"></a> 实例练习</h4>\n<ol>\n<li>\n<p>查询所有数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/37fc37460378972c530e76ae3abf6965.png\" alt=\"1584879409036\" /></p>\n<p>系统的<code>_id</code>无论如何都会存在</p>\n</li>\n<li>\n<p>查询age大于5的数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;age:&#123;$gt:<span class=\"token number\">5</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5fd7ebdc372dce37fefd36cc4f8944b6.png\" alt=\"image-20200708143634776\" /></p>\n</li>\n<li>\n<p>查询年龄是5岁、8岁、10岁的数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c2<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;age:&#123;$<span class=\"token operator\">in</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/158e14d8baa0f56abacd46c8ac274d31.png\" alt=\"image-20200708144003354\" /></p>\n</li>\n<li>\n<p>只看年龄列，或者年龄以外的列</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/91bcc38662f171c733a47f91935ceec2.png\" alt=\"image-20200708144049382\" /></p>\n</li>\n</ol>\n<h3 id=\"u修改文档\"><a class=\"markdownIt-Anchor\" href=\"#u修改文档\"></a> U修改文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">,</span>新数据<span class=\"token punctuation\">[</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>\n<p>新数据</p>\n<p>此数据需要使用修改器，如果不使用，那么会将新数据替换原来的数据。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">,</span>&#123;修改器:&#123;键:值&#125;&#125;<span class=\"token punctuation\">[</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">修改器</th>\n<th style=\"text-align:left\">作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">$inc</td>\n<td style=\"text-align:left\">递增</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$rename</td>\n<td style=\"text-align:left\">重命名列</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$set</td>\n<td style=\"text-align:left\">修改列值</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$unset</td>\n<td style=\"text-align:left\">删除列</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>是否新增</p>\n<p>指条件匹配不到数据则插入(<code>true</code>是插入，<code>false</code>否不插入默认)</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs30\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;age:<span class=\"token number\">30</span>&#125;&#125;<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e05952c64636480315119749f616353d.png\" alt=\"image-20200708151113714\" /></p>\n</li>\n<li>\n<p>是否修改多条</p>\n<p>指将匹配成功的数据都修改（<code>true</code>是，<code>false</code>否默认）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs2\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;age:<span class=\"token number\">30</span>&#125;&#125;<span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/6ba669b7d5bd0d6b99b11d4da6592f1f.png\" alt=\"image-20200708151328323\" /></p>\n</li>\n</ul>\n<h4 id=\"实例练习-2\"><a class=\"markdownIt-Anchor\" href=\"#实例练习-2\"></a> 实例练习</h4>\n<p>准备工作</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> test2<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>var i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span>&#123;\n\tdb<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span> &#123;<span class=\"token string\">\"uname\"</span>:<span class=\"token string\">\"zs\"</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">,</span><span class=\"token string\">\"age\"</span>:i&#125; <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<ol>\n<li>\n<p>将<code>&#123;uname:&quot;zs1&quot;&#125;</code>改为<code>&#123;uname:&quot;zs2&quot;&#125;</code></p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs1\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;uname:<span class=\"token string\">\"zs2\"</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/43faf08cc186e600477e9a04522da222.png\" alt=\"image-20200708145408835\" /></p>\n</li>\n<li>\n<p>给<code>&#123;uname:&quot;zs10&quot;&#125;</code>的年龄加2岁或减2岁</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs10\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$inc:&#123;age:<span class=\"token number\">2</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/ff0fa7ecaa6ad12231bdac18ebd67127.png\" alt=\"image-20200708145752429\" /></p>\n<p>递减只需要将2改为<code>-2</code>即可。</p>\n</li>\n<li>\n<p>综合练习</p>\n<p>插入数据：<code>db.c4.insert( &#123;uname:&quot;神龙教主&quot;,age:888,who:&quot;男&quot;,other:&quot;非国人&quot;&#125;);</code></p>\n<p>需求：</p>\n<ul>\n<li>\n<p><code>uname</code>改成 <code>webopenfather</code></p>\n<p>可以使用修改器<code>$set</code></p>\n</li>\n<li>\n<p><code>age</code>增加111</p>\n<p>可以使用修改器<code>$inc</code></p>\n</li>\n<li>\n<p><code>who</code>改字段<code>sex</code></p>\n<p>可以使用修改器<code>$rename</code></p>\n</li>\n<li>\n<p><code>other</code>删除</p>\n<p>可以使用修改器<code>$unset</code></p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">db<span class=\"token punctuation\">.</span>c4<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>uname<span class=\"token operator\">:</span><span class=\"token string\">'神龙教主'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n             <span class=\"token punctuation\">&#123;</span>$set<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>uname<span class=\"token operator\">:</span><span class=\"token string\">'webopenfather'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $inc<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token number\">111</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $rename<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>who<span class=\"token operator\">:</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $unset<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>other<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span>\n             <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5b54d3429f191c7360ad80a967ad0b53.png\" alt=\"image-20200708150646154\" /></p>\n</li>\n</ol>\n<h3 id=\"删除文档\"><a class=\"markdownIt-Anchor\" href=\"#删除文档\"></a> 删除文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否删除一条<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>\n<p>是否删除一条</p>\n<p>true：是（删除的数据为第一条）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/7e5671d614ee683be4b966f49ac5cae2.png\" alt=\"image-20200708151712548\" /></p>\n<p>false：否</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs3\"</span>&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/fc39535e4d2e3f1a7cbec5b59c3e2063.png\" alt=\"image-20200708151920899\" /></p>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\"></a> 总结</h2>\n<p>高级开发攻城狮统称：所有数据库都需要增删改查CURD标识</p>\n<p>MongoDB删除语法：remove</p>\n<p>增Create</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>JSON数据<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>删Delete</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>条件 <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否删除一条<span class=\"token boolean\">true</span>是<span class=\"token boolean\">false</span>否默认<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n也就是默认删除多条<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>改Update</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件， 新数据  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n升级语法db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件，&#123;修改器：&#123;键：值&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>查Read</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>条件 <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>查询的列<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n","more":"<h2 id=\"基本操作\"><a class=\"markdownIt-Anchor\" href=\"#基本操作\"></a> 基本操作</h2>\n<p>登陆数据库</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">mongo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"查看数据库\"><a class=\"markdownIt-Anchor\" href=\"#查看数据库\"></a> 查看数据库</h3>\n<p>语法</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">show</span> <span class=\"token keyword\">databases</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3182a965d1dfd5bf1b062f0256cef82f.png\" alt=\"image-20200708135132816\" /></p>\n<h3 id=\"选择数据库\"><a class=\"markdownIt-Anchor\" href=\"#选择数据库\"></a> 选择数据库</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> 数据库名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/cd6cb40242715180b0caea722f3ada43.png\" alt=\"image-20200708135204173\" /></p>\n<p>如果切换到一个没有的数据库，例如<code>use admin2</code>，那么会隐式创建这个数据库。（后期当该数据库有数据时，系统自动创建）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> admin2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/349774b3caed7941339ee109595ff191.png\" alt=\"image-20200708135402830\" /></p>\n<h3 id=\"查看集合\"><a class=\"markdownIt-Anchor\" href=\"#查看集合\"></a> 查看集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">show</span> collections<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/d033db28289e9381b9a442e77826aefc.png\" alt=\"image-20200708135654724\" /></p>\n<h3 id=\"创建集合\"><a class=\"markdownIt-Anchor\" href=\"#创建集合\"></a> 创建集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>createCollection<span class=\"token punctuation\">(</span><span class=\"token string\">'集合名'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/62e46049716993d198b9003bd8ccd43b.png\" alt=\"image-20200708135818996\" /></p>\n<h3 id=\"删除集合\"><a class=\"markdownIt-Anchor\" href=\"#删除集合\"></a> 删除集合</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">drop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/3cfaece4b4e1031ef111f26001244e5f.png\" alt=\"image-20200708135904893\" /></p>\n<h3 id=\"删除数据库\"><a class=\"markdownIt-Anchor\" href=\"#删除数据库\"></a> 删除数据库</h3>\n<ol>\n<li>通过<code>use</code>语法选择数据</li>\n<li>通过<code>db.dropDataBase()</code>删除数据库</li>\n</ol>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/bb2ce8d5056e575a3fb2c8535653114f.png\" alt=\"image-20200708140359164\" /></p>\n<h2 id=\"增删改查\"><a class=\"markdownIt-Anchor\" href=\"#增删改查\"></a> 增删改查</h2>\n<h3 id=\"c增\"><a class=\"markdownIt-Anchor\" href=\"#c增\"></a> C增</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>JSON数据<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>如果集合存在，那么直接插入数据。如果集合不存在，那么会隐式创建。</p>\n<blockquote>\n<p>在test2数据库的c1集合中插入数据（姓名叫webopenfather年龄18岁）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> test2\ndb<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"webopenfather\"</span><span class=\"token punctuation\">,</span>age:<span class=\"token number\">18</span>&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<ul>\n<li>数据库和集合不存在都隐式创建</li>\n<li>对象的键统一不加引号（方便看），但是查看集合数据时系统会自动加</li>\n<li>mongodb会给每条数据增加一个全球唯一的<code>_id</code>键</li>\n</ul>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/c72af3cd9c0145ece61d7aac83012e43.png\" alt=\"image-20200708141215126\" /></p>\n</blockquote>\n<ol>\n<li>\n<p><code>_id</code>键的组成</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/8a9bb3f1ad8158b015c5b6225e5d6fa1.png\" alt=\"1584876662100\" /></p>\n</li>\n<li>\n<p>自己增加<code>_id</code></p>\n<p>可以，只需要给插入的JSON数据增加_id键即可覆盖（但实战强烈不推荐）</p>\n<p><code>db.c1.insert(&#123;_id:1, uname:&quot;webopenfather&quot;, age:18&#125;)</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e7888cc7bf3ae4f09340e89e31495cc7.png\" alt=\"image-20200708141526348\" /></p>\n</li>\n<li>\n<p>一次性插入多条数据</p>\n<p>传递数据，数组中写一个个JSON数据即可。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    &#123;uname:<span class=\"token string\">\"z3\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">3</span>&#125;<span class=\"token punctuation\">,</span>\n    &#123;uname:<span class=\"token string\">\"z4\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">4</span>&#125;<span class=\"token punctuation\">,</span>\n    &#123;uname:<span class=\"token string\">\"w5\"</span><span class=\"token punctuation\">,</span> age:<span class=\"token number\">5</span>&#125;\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/1b0cb2a21b807dcbc6e89e5990efded1.png\" alt=\"image-20200708141643413\" /></p>\n</li>\n<li>\n<p>快速插入10条数据</p>\n<p>由于mongodb底层使用JS引擎实现的，所以支持部分js语法。因此：可以写for循环</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>var i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span> &#123;\n    db<span class=\"token punctuation\">.</span>c2<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>&#123;uanme: <span class=\"token string\">\"a\"</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">,</span> age: i&#125;<span class=\"token punctuation\">)</span>\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/38a2830201c37f173bcfda8984bcf7a0.png\" alt=\"image-20200708142047091\" /></p>\n</li>\n</ol>\n<h3 id=\"r查询文档\"><a class=\"markdownIt-Anchor\" href=\"#r查询文档\"></a> R查询文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>查询的列<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">条件</th>\n<th style=\"text-align:center\">写法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">查询所有的数据</td>\n<td style=\"text-align:center\"><code>&#123;&#125;</code>或者不写</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">查询<code>age=6</code>的数据</td>\n<td style=\"text-align:center\"><code>&#123;age:6&#125;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">既要<code>age=6</code>又要性别=男</td>\n<td style=\"text-align:center\"><code>&#123;age:6,sex:'男'&#125;</code></td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">查询的列（可选参数）</th>\n<th style=\"text-align:center\">写法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">查询全部列（字段）</td>\n<td style=\"text-align:center\">不写</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">只显示age列（字段）</td>\n<td style=\"text-align:center\"><code>&#123;age:1&#125;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">除了age列（字段）都显示</td>\n<td style=\"text-align:center\"><code>&#123;age:0&#125;</code></td>\n</tr>\n</tbody>\n</table>\n<p>其他语法</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;\n            键:&#123;运算符：值&#125;\n            &#125;<span class=\"token punctuation\">)</span> <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">运算符</th>\n<th style=\"text-align:center\">作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">$gt</td>\n<td style=\"text-align:center\">大于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$gte</td>\n<td style=\"text-align:center\">大于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$lt</td>\n<td style=\"text-align:center\">小于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$lte</td>\n<td style=\"text-align:center\">小于等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$ne</td>\n<td style=\"text-align:center\">不等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$in</td>\n<td style=\"text-align:center\">in</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$nin</td>\n<td style=\"text-align:center\">not in</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"实例练习\"><a class=\"markdownIt-Anchor\" href=\"#实例练习\"></a> 实例练习</h4>\n<ol>\n<li>\n<p>查询所有数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/37fc37460378972c530e76ae3abf6965.png\" alt=\"1584879409036\" /></p>\n<p>系统的<code>_id</code>无论如何都会存在</p>\n</li>\n<li>\n<p>查询age大于5的数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c1<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;age:&#123;$gt:<span class=\"token number\">5</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5fd7ebdc372dce37fefd36cc4f8944b6.png\" alt=\"image-20200708143634776\" /></p>\n</li>\n<li>\n<p>查询年龄是5岁、8岁、10岁的数据</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c2<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>&#123;age:&#123;$<span class=\"token operator\">in</span>:<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/158e14d8baa0f56abacd46c8ac274d31.png\" alt=\"image-20200708144003354\" /></p>\n</li>\n<li>\n<p>只看年龄列，或者年龄以外的列</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/91bcc38662f171c733a47f91935ceec2.png\" alt=\"image-20200708144049382\" /></p>\n</li>\n</ol>\n<h3 id=\"u修改文档\"><a class=\"markdownIt-Anchor\" href=\"#u修改文档\"></a> U修改文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">,</span>新数据<span class=\"token punctuation\">[</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>\n<p>新数据</p>\n<p>此数据需要使用修改器，如果不使用，那么会将新数据替换原来的数据。</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">,</span>&#123;修改器:&#123;键:值&#125;&#125;<span class=\"token punctuation\">[</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">修改器</th>\n<th style=\"text-align:left\">作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">$inc</td>\n<td style=\"text-align:left\">递增</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$rename</td>\n<td style=\"text-align:left\">重命名列</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$set</td>\n<td style=\"text-align:left\">修改列值</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">$unset</td>\n<td style=\"text-align:left\">删除列</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>是否新增</p>\n<p>指条件匹配不到数据则插入(<code>true</code>是插入，<code>false</code>否不插入默认)</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs30\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;age:<span class=\"token number\">30</span>&#125;&#125;<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/e05952c64636480315119749f616353d.png\" alt=\"image-20200708151113714\" /></p>\n</li>\n<li>\n<p>是否修改多条</p>\n<p>指将匹配成功的数据都修改（<code>true</code>是，<code>false</code>否默认）</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs2\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;age:<span class=\"token number\">30</span>&#125;&#125;<span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/6ba669b7d5bd0d6b99b11d4da6592f1f.png\" alt=\"image-20200708151328323\" /></p>\n</li>\n</ul>\n<h4 id=\"实例练习-2\"><a class=\"markdownIt-Anchor\" href=\"#实例练习-2\"></a> 实例练习</h4>\n<p>准备工作</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">use</span> test2<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>var i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+</span><span class=\"token operator\">+</span><span class=\"token punctuation\">)</span>&#123;\n\tdb<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span> &#123;<span class=\"token string\">\"uname\"</span>:<span class=\"token string\">\"zs\"</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">,</span><span class=\"token string\">\"age\"</span>:i&#125; <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<ol>\n<li>\n<p>将<code>&#123;uname:&quot;zs1&quot;&#125;</code>改为<code>&#123;uname:&quot;zs2&quot;&#125;</code></p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs1\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$<span class=\"token keyword\">set</span>:&#123;uname:<span class=\"token string\">\"zs2\"</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/43faf08cc186e600477e9a04522da222.png\" alt=\"image-20200708145408835\" /></p>\n</li>\n<li>\n<p>给<code>&#123;uname:&quot;zs10&quot;&#125;</code>的年龄加2岁或减2岁</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs10\"</span>&#125;<span class=\"token punctuation\">,</span>&#123;$inc:&#123;age:<span class=\"token number\">2</span>&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/ff0fa7ecaa6ad12231bdac18ebd67127.png\" alt=\"image-20200708145752429\" /></p>\n<p>递减只需要将2改为<code>-2</code>即可。</p>\n</li>\n<li>\n<p>综合练习</p>\n<p>插入数据：<code>db.c4.insert( &#123;uname:&quot;神龙教主&quot;,age:888,who:&quot;男&quot;,other:&quot;非国人&quot;&#125;);</code></p>\n<p>需求：</p>\n<ul>\n<li>\n<p><code>uname</code>改成 <code>webopenfather</code></p>\n<p>可以使用修改器<code>$set</code></p>\n</li>\n<li>\n<p><code>age</code>增加111</p>\n<p>可以使用修改器<code>$inc</code></p>\n</li>\n<li>\n<p><code>who</code>改字段<code>sex</code></p>\n<p>可以使用修改器<code>$rename</code></p>\n</li>\n<li>\n<p><code>other</code>删除</p>\n<p>可以使用修改器<code>$unset</code></p>\n</li>\n</ul>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">db<span class=\"token punctuation\">.</span>c4<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>uname<span class=\"token operator\">:</span><span class=\"token string\">'神龙教主'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n             <span class=\"token punctuation\">&#123;</span>$set<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>uname<span class=\"token operator\">:</span><span class=\"token string\">'webopenfather'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $inc<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>age<span class=\"token operator\">:</span><span class=\"token number\">111</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $rename<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>who<span class=\"token operator\">:</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n              $unset<span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>other<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">&#125;</span>\n             <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/5b54d3429f191c7360ad80a967ad0b53.png\" alt=\"image-20200708150646154\" /></p>\n</li>\n</ol>\n<h3 id=\"删除文档\"><a class=\"markdownIt-Anchor\" href=\"#删除文档\"></a> 删除文档</h3>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>条件<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否删除一条<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<ul>\n<li>\n<p>是否删除一条</p>\n<p>true：是（删除的数据为第一条）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/7e5671d614ee683be4b966f49ac5cae2.png\" alt=\"image-20200708151712548\" /></p>\n<p>false：否</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>c3<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>&#123;uname:<span class=\"token string\">\"zs3\"</span>&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile2@latest/2020/07/08/fc39535e4d2e3f1a7cbec5b59c3e2063.png\" alt=\"image-20200708151920899\" /></p>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\"></a> 总结</h2>\n<p>高级开发攻城狮统称：所有数据库都需要增删改查CURD标识</p>\n<p>MongoDB删除语法：remove</p>\n<p>增Create</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">insert</span><span class=\"token punctuation\">(</span>JSON数据<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>删Delete</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>remove<span class=\"token punctuation\">(</span>条件 <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否删除一条<span class=\"token boolean\">true</span>是<span class=\"token boolean\">false</span>否默认<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n也就是默认删除多条<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>改Update</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件， 新数据  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>是否新增<span class=\"token punctuation\">,</span>是否修改多条<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n升级语法db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span><span class=\"token keyword\">update</span><span class=\"token punctuation\">(</span>条件，&#123;修改器：&#123;键：值&#125;&#125;<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>查Read</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">db<span class=\"token punctuation\">.</span>集合名<span class=\"token punctuation\">.</span>find<span class=\"token punctuation\">(</span>条件 <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>查询的列<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n","categories":[{"name":"MongoDB","path":"api/categories/MongoDB.json"}],"tags":[{"name":"MongoDB","path":"api/tags/MongoDB.json"}]}