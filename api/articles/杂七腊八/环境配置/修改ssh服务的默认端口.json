{"title":"修改ssh服务的默认端口","slug":"杂七腊八/环境配置/修改ssh服务的默认端口","date":"2019-06-26T16:31:00.000Z","updated":"2022-02-21T07:18:57.069Z","comments":true,"path":"api/articles/杂七腊八/环境配置/修改ssh服务的默认端口.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/677d04dee80374ee2d260c3fd88984ca.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/e641366b8ff9f49bd782e19acb09694c.png"],"content":"<h2 id=\"修改端口前需要做的事情\"><a class=\"markdownIt-Anchor\" href=\"#修改端口前需要做的事情\"></a> 修改端口前需要做的事情</h2>\n<p><strong>此步很重要，否则会出现意想不到的惊喜！！！</strong></p>\n<ol>\n<li>关闭selinux\n<ul>\n<li>临时关闭<code>setenforce 0</code></li>\n<li>永久关闭<code>vim /etc/selinux/config</code> -&gt;将字段修改为disabled<code>SELINUX=disabled</code></li>\n</ul>\n</li>\n<li>关闭防火墙\n<ul>\n<li>临时关闭<code>systemctl stop firewalld</code></li>\n<li>取消开机自启<code>systemctl enable firewalld</code></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"修改ssh默认端口\"><a class=\"markdownIt-Anchor\" href=\"#修改ssh默认端口\"></a> 修改ssh默认端口</h2>\n<p>用vim打开文件<code>vim /etc/ssh/sshd_config</code>在Port字段下边写上需要修改的端口。例如我将ssh的端口改为1234</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/677d04dee80374ee2d260c3fd88984ca.png\" alt=\"\" /></p>\n<p>修改好后，保存退出。重启sshd服务<code>systemctl restart sshd.service</code></p>\n<h2 id=\"防火墙放行端口\"><a class=\"markdownIt-Anchor\" href=\"#防火墙放行端口\"></a> 防火墙放行端口</h2>\n<p><em>首先说一下这一步的作用，在刚刚我们修改了默认端口，那么当开启防火墙的时候会拦截这个端口(默认情况下)，所以我们需要告诉防火墙，不要拦截我刚刚设置的那个端口。</em></p>\n<p><code>firewall-cmd --add-port=1234/tcp --permanent</code> 结尾的<code>--permanent</code>代表永久生效。设置完成后那么让刚刚设置的放行规则生效<code>firewall-cmd --reload</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/e641366b8ff9f49bd782e19acb09694c.png\" alt=\"\" /></p>\n<h2 id=\"查看端口\"><a class=\"markdownIt-Anchor\" href=\"#查看端口\"></a> 查看端口</h2>\n<p>查看端口很简单，只有一条命令<code>netstat -ntpl</code></p>\n<h2 id=\"小套路\"><a class=\"markdownIt-Anchor\" href=\"#小套路\"></a> 小套路</h2>\n<p>在修改端口时，建议开两个终端，留着一个终端，在另一个终端进行操作，即使手误改错，那么还有一个终端可以操作虚拟机。</p>\n","more":"<h2 id=\"修改端口前需要做的事情\"><a class=\"markdownIt-Anchor\" href=\"#修改端口前需要做的事情\"></a> 修改端口前需要做的事情</h2>\n<p><strong>此步很重要，否则会出现意想不到的惊喜！！！</strong></p>\n<ol>\n<li>关闭selinux\n<ul>\n<li>临时关闭<code>setenforce 0</code></li>\n<li>永久关闭<code>vim /etc/selinux/config</code> -&gt;将字段修改为disabled<code>SELINUX=disabled</code></li>\n</ul>\n</li>\n<li>关闭防火墙\n<ul>\n<li>临时关闭<code>systemctl stop firewalld</code></li>\n<li>取消开机自启<code>systemctl enable firewalld</code></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"修改ssh默认端口\"><a class=\"markdownIt-Anchor\" href=\"#修改ssh默认端口\"></a> 修改ssh默认端口</h2>\n<p>用vim打开文件<code>vim /etc/ssh/sshd_config</code>在Port字段下边写上需要修改的端口。例如我将ssh的端口改为1234</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/677d04dee80374ee2d260c3fd88984ca.png\" alt=\"\" /></p>\n<p>修改好后，保存退出。重启sshd服务<code>systemctl restart sshd.service</code></p>\n<h2 id=\"防火墙放行端口\"><a class=\"markdownIt-Anchor\" href=\"#防火墙放行端口\"></a> 防火墙放行端口</h2>\n<p><em>首先说一下这一步的作用，在刚刚我们修改了默认端口，那么当开启防火墙的时候会拦截这个端口(默认情况下)，所以我们需要告诉防火墙，不要拦截我刚刚设置的那个端口。</em></p>\n<p><code>firewall-cmd --add-port=1234/tcp --permanent</code> 结尾的<code>--permanent</code>代表永久生效。设置完成后那么让刚刚设置的放行规则生效<code>firewall-cmd --reload</code></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/11/e641366b8ff9f49bd782e19acb09694c.png\" alt=\"\" /></p>\n<h2 id=\"查看端口\"><a class=\"markdownIt-Anchor\" href=\"#查看端口\"></a> 查看端口</h2>\n<p>查看端口很简单，只有一条命令<code>netstat -ntpl</code></p>\n<h2 id=\"小套路\"><a class=\"markdownIt-Anchor\" href=\"#小套路\"></a> 小套路</h2>\n<p>在修改端口时，建议开两个终端，留着一个终端，在另一个终端进行操作，即使手误改错，那么还有一个终端可以操作虚拟机。</p>\n","categories":[{"name":"Linux","path":"api/categories/Linux.json"},{"name":"修改端口","path":"api/categories/修改端口.json"}],"tags":[{"name":"修改端口","path":"api/tags/修改端口.json"}]}