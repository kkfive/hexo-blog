{"title":"Valine评论之Valine-admin配置攻略","slug":"Hexo相关/评论相关/Valine评论之Valine-admin配置攻略","date":"2020-02-16T00:10:25.000Z","updated":"2022-02-21T13:24:30.856Z","comments":false,"path":"api/articles/Hexo相关/评论相关/Valine评论之Valine-admin配置攻略.json","excerpt":null,"covers":["https://tva1.sinaimg.cn/large/005B3XPgly1gbk1g2c7vcj300v00s3y9.jpg","https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/1f54503ed6d2807b9f693be3d0ee974c.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/394afea0b0c1127a5b47069bf1243d40.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/521500c7490524eaa0d41b4ab7d0f875.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/bf1ab7eeed9077690dfab69d04e1c207.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/62d6bfbcee90da70df2373844d2abde0.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/9578993781726c573d997ff1cb659155.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5fcab394c9f9e2f488b3b60b498bf0e3.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/37b6287f531a5ef1b7e9cfceb7ab7ddc.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/eec3f243aa210fb3a0c2abf663cd1448.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/29f3be235deda67a564c9328a3234bfb.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/ea958d3043bd17ae9aeb0b0f9f7920b5.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/0a4392fc75565336151ac857eeef76b7.png","upload/image-20200516173737785.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/a4c1045400ca9fb6bb140721500ded60.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5400ad48e47704d503e994680715cf5c.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/e14cce66e98ababc5f7099ba4403457a.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/03/31/98657c0fe57e93ee81d53bc1aa056a02.png","https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/17/1cdee418510f0e8defb7a4848b9e5d1a.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141052.png","https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141253.png"],"content":"<div class=\"note danger icon flat\"><p>由于作者已放弃valine评论，故关于此评论有关的项目均已放弃。</p>\n</div>\n<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>这篇文章所用的Valine-admin是<a href=\"https://www.antmoe.com/\">小康</a>根据<a href=\"https://blog.hclonely.com/posts/409d3090/\">懒人大佬</a>及其他两位valine-admin的作者进行二次开发版本。可能会与大佬保持更新(<s>其实就是抄代码</s>)，也可能不会。<strong>但需要注意的是：此版本中的设定可能与你之前用的有些出入，如果无法接受，那么可以关掉这个页面。没人强迫你用。</strong></p>\n<p>项目重大历史：</p>\n<ul>\n<li>\n<p>2020-02-16</p>\n<p>第一次版本发布，这是仅有微信提醒功能</p>\n</li>\n<li>\n<p>2020-04-19</p>\n<p>基于懒人大佬，弃用request</p>\n</li>\n<li>\n<p>2020-04-20</p>\n<p>添加qq提醒</p>\n</li>\n<li>\n<p>2020-05-15</p>\n<p>适配国际版时区问题（beta）</p>\n</li>\n</ul>\n<p>最初修改这个项目的原因是因为不在电脑旁的时候，如果有人评论会发送邮件，但手机有时候不会提醒（<s>可能手机垃圾吧</s>）。<img src=\"https://tva1.sinaimg.cn/large/005B3XPgly1gbk1g2c7vcj300v00s3y9.jpg\" alt=\"-小康博客\" /></p>\n<p>于是我便想到了曾经好友向我展示的server酱，只不过当时是以聊天室的形式展示的（其实也有人向我展示过评论通知的）。于是我便突发奇想，决定试试这个微信server酱。</p>\n<p>这样就可以给我发微信通知了，从此再也不会看不到评论了！</p>\n<h2 id=\"部署前需要获取的密钥\"><a class=\"markdownIt-Anchor\" href=\"#部署前需要获取的密钥\"></a> 部署前需要获取的密钥</h2>\n<p>这部分主要介绍QQ提醒，微信提醒及垃圾评论检测的密钥获取途径。如果不需要可以直接跳过，看后边的部署Valine-admin部分。</p>\n<h3 id=\"service酱sckey获取\"><a class=\"markdownIt-Anchor\" href=\"#service酱sckey获取\"></a> Service酱SCKEY获取</h3>\n<p>首先需要到server的官网，开启微信提醒并获取<code>SCKEY</code>。<a href=\"http://sc.ftqq.com/\">官网</a>写的很详细，这里不在过多赘述。相信能动手搭Hexo博客的小伙伴都能看懂server酱官方的教程。小伙伴开启微信通知后顺便在官方那里测试下能否接到通知哦。</p>\n<h3 id=\"qmsg密钥获取\"><a class=\"markdownIt-Anchor\" href=\"#qmsg密钥获取\"></a> Qmsg密钥获取</h3>\n<p>Qmsg的官网为：<a href=\"https://qmsg.zendee.cn/\">https://qmsg.zendee.cn/</a>,进入官网，登录账号（qq或者神邸用户都可以）。</p>\n<ol>\n<li>\n<p>选择并<font color=red><b>添加</b></font>一个消息发送者，并填写你接受消息的qq号。（可以使用小号登录，大号接收）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/1f54503ed6d2807b9f693be3d0ee974c.png\" alt=\"\" /></p>\n<blockquote>\n<p>不要问为什么收不到消息 ， 你不加他当然收不到了。选择哪个添加哪个即可。</p>\n</blockquote>\n</li>\n<li>\n<p>获取密钥</p>\n<p>点击右上角的文档，然后你会看到一个网址。这个网址里边会有一串奇怪的字母数字组合，我们复制他（也就是图中被我马赛克的地方）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/394afea0b0c1127a5b47069bf1243d40.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h3 id=\"akismet_key获取\"><a class=\"markdownIt-Anchor\" href=\"#akismet_key获取\"></a> AKISMET_KEY获取</h3>\n<blockquote>\n<p>Akismet (Automattic Kismet)是应用广泛的一个垃圾留言过滤系统，其作者是大名鼎鼎的WordPress 创始人 Matt Mullenweg，Akismet也是WordPress默认安装的插件，其使用非常广泛，设计目标便是帮助博客网站来过滤留言Spam。有了Akismet之后，基本上不用担心垃圾留言的烦恼了。<br />\n启用Akismet后，当博客再收到留言会自动将其提交到Akismet并与Akismet上的黑名单进行比对，如果名列该黑名单中，则该条留言会被标记为垃圾评论且不会发布。</p>\n</blockquote>\n<p>如果你用过 WordPress 你应该有 Akismet Key；如果还没有，你可以去 <a href=\"https://akismet.com/development/\">AKISMET FOR DEVELOPERS 免费申请一个</a>；如果你不需要反垃圾评论，Akismet Key 环境变量可以忽略。</p>\n<p><strong>为了实现较为精准的垃圾评论识别，采集的判据除了评论内容、邮件地址和网站地址外，还包括评论者的IP地址、浏览器信息等，但仅在云引擎后台使用这些数据，确保隐私和安全。</strong></p>\n<p><strong>如果使用了本站最新的Valine和Valine Admin，并设置了Akismet Key，可以有效地拦截垃圾评论。被标为垃圾的评论可以在管理页面取消标注。</strong></p>\n<h2 id=\"部署valine-admin\"><a class=\"markdownIt-Anchor\" href=\"#部署valine-admin\"></a> 部署valine-admin</h2>\n<p>这一步主要是告诉你如何快速部署这个项目。</p>\n<p><strong>如果你已经部署了Valine评论，那么不需要创建新应用，将此项目应用于你的valine应用即可。</strong></p>\n<ol>\n<li>\n<p>登录LeanCloud的官网。（如何注册就不介绍了。）</p>\n<p>登录无论是国际版还是国内版都是可以的。</p>\n<p>成功登录后，会看到如下界面。右上角可以看到你当前是你的登录节点是国内还是国外，比如我的是国内华北节点。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/521500c7490524eaa0d41b4ab7d0f875.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>创建应用并进入应用</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/bf1ab7eeed9077690dfab69d04e1c207.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/62d6bfbcee90da70df2373844d2abde0.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/9578993781726c573d997ff1cb659155.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>开始部署项目</p>\n<p>依次点击左侧的云引擎-&gt;部署-&gt;项目部署-&gt;Git部署-&gt;配置Git。然后Git的地址填写：<a href=\"https://github.com/sviptzk/Valine-Admin-Server\">https://github.com/sviptzk/Valine-Admin-Server</a>。然后再次点击Git部署-&gt;部署即可</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5fcab394c9f9e2f488b3b60b498bf0e3.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/37b6287f531a5ef1b7e9cfceb7ab7ddc.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>绑定评论管理的域名</p>\n<ul>\n<li>\n<p>国区版</p>\n<p>LeanCloud不给予免费的二级域名了，因此必须绑定备案域名。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/eec3f243aa210fb3a0c2abf663cd1448.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>国际版</p>\n<p>LeanCloud给予一个免费的二级域名。当然也可以绑定自己的（方式与国区版相同）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/29f3be235deda67a564c9328a3234bfb.png\" alt=\"\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>设置域名白名单</p>\n<p>域名可设置多个，一行一个。需要写协议头。如果使用的是默认端口号可以省略，但协议头一定要写。例如我的设置如图：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/ea958d3043bd17ae9aeb0b0f9f7920b5.png\" alt=\"image-20200516172247325\" /></p>\n</li>\n<li>\n<p>设置环境变量</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/0a4392fc75565336151ac857eeef76b7.png\" alt=\"\" /></p>\n<p>此变量表只针对此项目，如果使用原项目可能不生效</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">变量名</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">SITE_NAME</td>\n<td style=\"text-align:center\">[必填]网站名称</td>\n<td style=\"text-align:center\">小康博客</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SITE_URL</td>\n<td style=\"text-align:center\">[必填]网站地址，最后不要加<code>/</code></td>\n<td style=\"text-align:center\"><a href=\"https://www.antmoe.com\">https://www.antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_USER</td>\n<td style=\"text-align:center\">[必填]SMTP 服务用户名，一般为邮箱地址。</td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_PASS</td>\n<td style=\"text-align:center\">[必填]SMTP 密码，一般为授权码，而不是邮箱的登陆密码，请自行查询对应邮件服务商的获取方式</td>\n<td style=\"text-align:center\">123</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_SERVICE</td>\n<td style=\"text-align:center\">[新版支持]邮件服务提供商,<a href=\"https://nodemailer.com/smtp/well-known/#supported-services\">内置支持</a></td>\n<td style=\"text-align:center\">163</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SENDER_NAME</td>\n<td style=\"text-align:center\">[必填]寄件人名称。</td>\n<td style=\"text-align:center\">小康博客</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">TO_EMAIL</td>\n<td style=\"text-align:center\">[可选]博主通知收件地址，默认使用SMTP_USER</td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">BLOGGER_EMAIL</td>\n<td style=\"text-align:center\">[可选]如果设置则作为后台管理员邮箱（<code>/sign-up</code>页面设置），不设置则默认以<code>SMTP_USER</code></td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">TEMPLATE_NAME</td>\n<td style=\"text-align:center\">[必填]设置提醒邮件的主题</td>\n<td style=\"text-align:center\">custom2</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">AKISMET_KEY</td>\n<td style=\"text-align:center\">[可选]Akismet Key 用于垃圾评论检测，设为MANUAL_REVIEW开启人工审核，留空不使用反垃圾</td>\n<td style=\"text-align:center\">xxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ADMIN_URL</td>\n<td style=\"text-align:center\">[可选]后台管理地址(<strong>非博客地址</strong>)</td>\n<td style=\"text-align:center\"><a href=\"https://xxxx.leanapp.cn/\">https://xxxx.leanapp.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">COMMENT</td>\n<td style=\"text-align:center\">[可选]评论div的ID名</td>\n<td style=\"text-align:center\">#post-comment</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SCKEY</td>\n<td style=\"text-align:center\">[可选]server酱的SCKEY</td>\n<td style=\"text-align:center\">xxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">AKISMET_KEY</td>\n<td style=\"text-align:center\">[可选]Akismet Key 用于垃圾评论检测</td>\n<td style=\"text-align:center\">xxxxxxxxxxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QMSG_KEY</td>\n<td style=\"text-align:center\">[可选]Qmsg酱的密钥</td>\n<td style=\"text-align:center\">xxxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ</td>\n<td style=\"text-align:center\">[可选]Qmsg酱发送的qq，不填为全部。支持多个，用英文逗号分隔即可</td>\n<td style=\"text-align:center\">535668586</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">DISABLE_EMAIL</td>\n<td style=\"text-align:center\">[可选]，填写则代表停止发送邮件</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ_SHAKE</td>\n<td style=\"text-align:center\">[可选]，填写代表发送QQ戳一戳</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ICP</td>\n<td style=\"text-align:center\">[可选]备案信息，直接填写即可。</td>\n<td style=\"text-align:center\">京ICP备19022312号</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">INFO</td>\n<td style=\"text-align:center\">[可选]自定义信息输出，支持HTML代码</td>\n<td style=\"text-align:center\"><code>&lt;p style='color:red'&gt;test&lt;p&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">favicon</td>\n<td style=\"text-align:center\">[可选]网页favicon图标</td>\n<td style=\"text-align:center\"><a href=\"https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO/butterfly/img/favicon.ico\">https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO/butterfly/img/favicon.ico</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SPAM_WORDS</td>\n<td style=\"text-align:center\">[可选]需要对屏蔽的关键词，关键词用半角逗号分隔</td>\n<td style=\"text-align:center\">单号,物流</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MAIN_COLOR</td>\n<td style=\"text-align:center\">[可选]仅针对<code>custom2</code>模板主题的主要颜色</td>\n<td style=\"text-align:center\">#ff9191</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MAIN_IMG</td>\n<td style=\"text-align:center\">[可选]仅针对<code>custom2</code>模板主题的头图</td>\n<td style=\"text-align:center\"><code>https://bing.rthe.net/wallpaper</code></td>\n</tr>\n</tbody>\n</table>\n<p>当使用自定义邮件服务器时（需将<code>SMTP_SERVICE</code>变量删掉哦！）</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">变量名</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">SMTP_HOST</td>\n<td style=\"text-align:center\">邮件服务提供商 SMTP 地址，此项需要自行查询或询问其服务商。</td>\n<td style=\"text-align:center\"><code>smtp.ym.163.com</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_PORT</td>\n<td style=\"text-align:center\">邮件服务提供商 SMTP 端口, <em>此项需要自行查询或询问其服务商</em>。</td>\n<td style=\"text-align:center\">994</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_SECURE</td>\n<td style=\"text-align:center\">是否启用加密, 默认为 <code>true</code>，一般不需要设置，如有特殊请自行配置。 <em>此项需要自行查询或询问其服务商</em>。</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n</tbody>\n</table>\n<p>此项目的主题字段</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">主题</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">default</td>\n<td style=\"text-align:center\">默认主题</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">rainbow</td>\n<td style=\"text-align:center\">原版的rainbow</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">custom1</td>\n<td style=\"text-align:center\">基于<a href=\"https://pbas.club/\">🎉梨花町の肾兄さん🎉</a>的模板</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">custom2</td>\n<td style=\"text-align:center\">对custom1的改进版</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>添加完成后，点击保存。并且重新部署实例。</p>\n<p>我这里以最简设置为例，请各位博主认真看每个变量的含义最后决定要不要设置。</p>\n<p><img src=\"upload/image-20200516173737785.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/a4c1045400ca9fb6bb140721500ded60.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>初始化后台管理</p>\n<p><em>如果你没有设置后台域名</em>，即没有做第四步。那么也可以跳过这一步。</p>\n<p>打开绑定的域名+<code>/sign-up</code>，例如我的域名为<code>https://xiaokang.avosapps.us/</code>，那么我访问的地址就是<code>https://xiaokang.avosapps.us/sign-up</code>。接下来设置你的登录信息。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5400ad48e47704d503e994680715cf5c.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>登录后台</p>\n<p>接下来就可以用刚才的邮箱或者登录名登录了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/e14cce66e98ababc5f7099ba4403457a.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>基本完成了设置</p>\n<p>到这里基本上完成了valine-admin的基本设置。如果你觉得我的项目还不错，可以为我点个star哦！</p>\n</li>\n</ol>\n<h2 id=\"防止服务器休眠\"><a class=\"markdownIt-Anchor\" href=\"#防止服务器休眠\"></a> 防止服务器休眠</h2>\n<p>关于自动休眠的官方说法：<a href=\"https://leancloud.cn/docs/leanengine_plan.html#hash633315134\">点击查看</a></p>\n<p>关于服务器休眠唤醒的问题，以前的方法是通过自带的定时任务进行唤醒，但现在不可以了，因为官方进行限制了。因此对于服务器的自唤醒可以参考<a href=\"https://www.antmoe.com/posts/ff6aef7b/index.html\">优雅解决LeanCloud流控问题</a>这篇文章进行解决。</p>\n<p>至于重发函数，还是和往常一样，但由于流控限制，因此最好能保证重发时机器是活着的。不然很可能会触发<em>因流控原因，通过定时任务唤醒体验版实例失败，建议升级至标准版云引擎实例避免休眠</em></p>\n<p>选择resend-mails云函数，Cron表达式为<code>0 59 7 * * *</code>，表示每天早8点20分检查过去24小时内漏发的通知邮件并补发（请尽量确保你设置的时间机器是醒着的）：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/03/31/98657c0fe57e93ee81d53bc1aa056a02.png\" alt=\"\" /></p>\n<h2 id=\"使用问题\"><a class=\"markdownIt-Anchor\" href=\"#使用问题\"></a> 使用问题</h2>\n<p>此项目是在原项目的基础上进行的二次开发（<s>其实并不是开发，只是添加一个请求而已</s>）。所以使用上可能会遇到一些问题，因此遇到问题可以在下方留言,或者给我发送Email。</p>\n<h3 id=\"添加丰富的评论表情\"><a class=\"markdownIt-Anchor\" href=\"#添加丰富的评论表情\"></a> 添加丰富的评论表情</h3>\n<p>参考：<a href=\"https://www.antmoe.com/posts/284f2e1c/index.html\">Valine如何添加多个表情</a></p>\n<h3 id=\"无法登录后台\"><a class=\"markdownIt-Anchor\" href=\"#无法登录后台\"></a> 无法登录后台</h3>\n<p>这个主要原因是因为后台验证机制变了，只需要访问你的后台管理的域名+sign-up即可。</p>\n<p>例如我的后台管理地址为<code>www.antmoe.com</code>那么我访问的地址就是<code>www.antmoe.com/sign-up</code></p>\n<center><font color=red size=5><b>原创文章，转载请标明出处。</b></font></center>\n<h2 id=\"更新说明\"><a class=\"markdownIt-Anchor\" href=\"#更新说明\"></a> 更新说明</h2>\n<ul>\n<li>\n<p>2020-06-24</p>\n<p><code>A</code> 关键词屏蔽字段</p>\n</li>\n<li>\n<p>2020-06-20</p>\n<p><code>A</code> 增加<code>favicon</code>字段</p>\n</li>\n<li>\n<p>2020-06-10</p>\n<p><code>A</code>添加了头图自定义（仅限<code>custom2</code>主题）</p>\n<p><code>A</code>添加了模板主要颜色自定义（仅限<code>custom2</code>主题）</p>\n</li>\n<li>\n<p>2020-05-17</p>\n<p><code>A</code>添加页脚自定义信息（支持HTML代码）</p>\n<p><code>A</code>添加备案信息行</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/17/1cdee418510f0e8defb7a4848b9e5d1a.png\" alt=\"image-20200517192601574\" /></p>\n</li>\n<li>\n<p>2020-05-15</p>\n<p><code>A</code>适配国际版时间问题</p>\n<p><code>A</code>添加字段<code>BLOGGER_EMAIL</code></p>\n</li>\n<li>\n<p>2020-04-25</p>\n<p><code>A</code> QQ戳一戳功能<br />\n<code>A</code> 是否开启邮件通知<br />\n<code>F</code> <strong>QMSG字段修改为QMSG_KEY</strong></p>\n</li>\n<li>\n<p>2020-04-20</p>\n<p>添加了qq提醒</p>\n</li>\n<li>\n<p>2020-04-19</p>\n<p>基于懒人的版本重新构建（弃用了request）</p>\n</li>\n<li>\n<p>2020-03-31</p>\n<p>更新了新内容，整合了垃圾评论功能。</p>\n</li>\n<li>\n<p>2020-03-24</p>\n<p>对前一套模板进行了修改（重要内容用灰色背景显示）</p>\n</li>\n<li>\n<p>2020-03-20</p>\n<ul>\n<li>\n<p>增加了一套新的模板(感谢<a href=\"https://pbas.club/\">🎉梨花町の肾兄さん🎉</a>提供好素材)，模板名为<code>custom1</code></p>\n<img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141052.png\" alt=\"提醒博主\" width=\"25%\"/>\n<img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141253.png\" alt=\"博主回复\" width=\"25%\"/>\n</li>\n</ul>\n</li>\n<li>\n<p>2020-02-16</p>\n<ul>\n<li>第一次发布，增加了微信server酱提醒</li>\n</ul>\n</li>\n</ul>\n<script src=\"https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/js/WithoutLine.min.js\"></script>","more":"<div class=\"note danger icon flat\"><p>由于作者已放弃valine评论，故关于此评论有关的项目均已放弃。</p>\n</div>\n<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\"></a> 前言</h2>\n<p>这篇文章所用的Valine-admin是<a href=\"https://www.antmoe.com/\">小康</a>根据<a href=\"https://blog.hclonely.com/posts/409d3090/\">懒人大佬</a>及其他两位valine-admin的作者进行二次开发版本。可能会与大佬保持更新(<s>其实就是抄代码</s>)，也可能不会。<strong>但需要注意的是：此版本中的设定可能与你之前用的有些出入，如果无法接受，那么可以关掉这个页面。没人强迫你用。</strong></p>\n<p>项目重大历史：</p>\n<ul>\n<li>\n<p>2020-02-16</p>\n<p>第一次版本发布，这是仅有微信提醒功能</p>\n</li>\n<li>\n<p>2020-04-19</p>\n<p>基于懒人大佬，弃用request</p>\n</li>\n<li>\n<p>2020-04-20</p>\n<p>添加qq提醒</p>\n</li>\n<li>\n<p>2020-05-15</p>\n<p>适配国际版时区问题（beta）</p>\n</li>\n</ul>\n<p>最初修改这个项目的原因是因为不在电脑旁的时候，如果有人评论会发送邮件，但手机有时候不会提醒（<s>可能手机垃圾吧</s>）。<img src=\"https://tva1.sinaimg.cn/large/005B3XPgly1gbk1g2c7vcj300v00s3y9.jpg\" alt=\"-小康博客\" /></p>\n<p>于是我便想到了曾经好友向我展示的server酱，只不过当时是以聊天室的形式展示的（其实也有人向我展示过评论通知的）。于是我便突发奇想，决定试试这个微信server酱。</p>\n<p>这样就可以给我发微信通知了，从此再也不会看不到评论了！</p>\n<h2 id=\"部署前需要获取的密钥\"><a class=\"markdownIt-Anchor\" href=\"#部署前需要获取的密钥\"></a> 部署前需要获取的密钥</h2>\n<p>这部分主要介绍QQ提醒，微信提醒及垃圾评论检测的密钥获取途径。如果不需要可以直接跳过，看后边的部署Valine-admin部分。</p>\n<h3 id=\"service酱sckey获取\"><a class=\"markdownIt-Anchor\" href=\"#service酱sckey获取\"></a> Service酱SCKEY获取</h3>\n<p>首先需要到server的官网，开启微信提醒并获取<code>SCKEY</code>。<a href=\"http://sc.ftqq.com/\">官网</a>写的很详细，这里不在过多赘述。相信能动手搭Hexo博客的小伙伴都能看懂server酱官方的教程。小伙伴开启微信通知后顺便在官方那里测试下能否接到通知哦。</p>\n<h3 id=\"qmsg密钥获取\"><a class=\"markdownIt-Anchor\" href=\"#qmsg密钥获取\"></a> Qmsg密钥获取</h3>\n<p>Qmsg的官网为：<a href=\"https://qmsg.zendee.cn/\">https://qmsg.zendee.cn/</a>,进入官网，登录账号（qq或者神邸用户都可以）。</p>\n<ol>\n<li>\n<p>选择并<font color=red><b>添加</b></font>一个消息发送者，并填写你接受消息的qq号。（可以使用小号登录，大号接收）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/1f54503ed6d2807b9f693be3d0ee974c.png\" alt=\"\" /></p>\n<blockquote>\n<p>不要问为什么收不到消息 ， 你不加他当然收不到了。选择哪个添加哪个即可。</p>\n</blockquote>\n</li>\n<li>\n<p>获取密钥</p>\n<p>点击右上角的文档，然后你会看到一个网址。这个网址里边会有一串奇怪的字母数字组合，我们复制他（也就是图中被我马赛克的地方）</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/20/394afea0b0c1127a5b47069bf1243d40.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h3 id=\"akismet_key获取\"><a class=\"markdownIt-Anchor\" href=\"#akismet_key获取\"></a> AKISMET_KEY获取</h3>\n<blockquote>\n<p>Akismet (Automattic Kismet)是应用广泛的一个垃圾留言过滤系统，其作者是大名鼎鼎的WordPress 创始人 Matt Mullenweg，Akismet也是WordPress默认安装的插件，其使用非常广泛，设计目标便是帮助博客网站来过滤留言Spam。有了Akismet之后，基本上不用担心垃圾留言的烦恼了。<br />\n启用Akismet后，当博客再收到留言会自动将其提交到Akismet并与Akismet上的黑名单进行比对，如果名列该黑名单中，则该条留言会被标记为垃圾评论且不会发布。</p>\n</blockquote>\n<p>如果你用过 WordPress 你应该有 Akismet Key；如果还没有，你可以去 <a href=\"https://akismet.com/development/\">AKISMET FOR DEVELOPERS 免费申请一个</a>；如果你不需要反垃圾评论，Akismet Key 环境变量可以忽略。</p>\n<p><strong>为了实现较为精准的垃圾评论识别，采集的判据除了评论内容、邮件地址和网站地址外，还包括评论者的IP地址、浏览器信息等，但仅在云引擎后台使用这些数据，确保隐私和安全。</strong></p>\n<p><strong>如果使用了本站最新的Valine和Valine Admin，并设置了Akismet Key，可以有效地拦截垃圾评论。被标为垃圾的评论可以在管理页面取消标注。</strong></p>\n<h2 id=\"部署valine-admin\"><a class=\"markdownIt-Anchor\" href=\"#部署valine-admin\"></a> 部署valine-admin</h2>\n<p>这一步主要是告诉你如何快速部署这个项目。</p>\n<p><strong>如果你已经部署了Valine评论，那么不需要创建新应用，将此项目应用于你的valine应用即可。</strong></p>\n<ol>\n<li>\n<p>登录LeanCloud的官网。（如何注册就不介绍了。）</p>\n<p>登录无论是国际版还是国内版都是可以的。</p>\n<p>成功登录后，会看到如下界面。右上角可以看到你当前是你的登录节点是国内还是国外，比如我的是国内华北节点。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/521500c7490524eaa0d41b4ab7d0f875.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>创建应用并进入应用</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/bf1ab7eeed9077690dfab69d04e1c207.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/62d6bfbcee90da70df2373844d2abde0.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/9578993781726c573d997ff1cb659155.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>开始部署项目</p>\n<p>依次点击左侧的云引擎-&gt;部署-&gt;项目部署-&gt;Git部署-&gt;配置Git。然后Git的地址填写：<a href=\"https://github.com/sviptzk/Valine-Admin-Server\">https://github.com/sviptzk/Valine-Admin-Server</a>。然后再次点击Git部署-&gt;部署即可</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5fcab394c9f9e2f488b3b60b498bf0e3.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/37b6287f531a5ef1b7e9cfceb7ab7ddc.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>绑定评论管理的域名</p>\n<ul>\n<li>\n<p>国区版</p>\n<p>LeanCloud不给予免费的二级域名了，因此必须绑定备案域名。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/eec3f243aa210fb3a0c2abf663cd1448.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>国际版</p>\n<p>LeanCloud给予一个免费的二级域名。当然也可以绑定自己的（方式与国区版相同）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/29f3be235deda67a564c9328a3234bfb.png\" alt=\"\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>设置域名白名单</p>\n<p>域名可设置多个，一行一个。需要写协议头。如果使用的是默认端口号可以省略，但协议头一定要写。例如我的设置如图：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/ea958d3043bd17ae9aeb0b0f9f7920b5.png\" alt=\"image-20200516172247325\" /></p>\n</li>\n<li>\n<p>设置环境变量</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/0a4392fc75565336151ac857eeef76b7.png\" alt=\"\" /></p>\n<p>此变量表只针对此项目，如果使用原项目可能不生效</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">变量名</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">SITE_NAME</td>\n<td style=\"text-align:center\">[必填]网站名称</td>\n<td style=\"text-align:center\">小康博客</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SITE_URL</td>\n<td style=\"text-align:center\">[必填]网站地址，最后不要加<code>/</code></td>\n<td style=\"text-align:center\"><a href=\"https://www.antmoe.com\">https://www.antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_USER</td>\n<td style=\"text-align:center\">[必填]SMTP 服务用户名，一般为邮箱地址。</td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_PASS</td>\n<td style=\"text-align:center\">[必填]SMTP 密码，一般为授权码，而不是邮箱的登陆密码，请自行查询对应邮件服务商的获取方式</td>\n<td style=\"text-align:center\">123</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_SERVICE</td>\n<td style=\"text-align:center\">[新版支持]邮件服务提供商,<a href=\"https://nodemailer.com/smtp/well-known/#supported-services\">内置支持</a></td>\n<td style=\"text-align:center\">163</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SENDER_NAME</td>\n<td style=\"text-align:center\">[必填]寄件人名称。</td>\n<td style=\"text-align:center\">小康博客</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">TO_EMAIL</td>\n<td style=\"text-align:center\">[可选]博主通知收件地址，默认使用SMTP_USER</td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">BLOGGER_EMAIL</td>\n<td style=\"text-align:center\">[可选]如果设置则作为后台管理员邮箱（<code>/sign-up</code>页面设置），不设置则默认以<code>SMTP_USER</code></td>\n<td style=\"text-align:center\"><a href=\"mailto:admin@antmoe.com\">admin@antmoe.com</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">TEMPLATE_NAME</td>\n<td style=\"text-align:center\">[必填]设置提醒邮件的主题</td>\n<td style=\"text-align:center\">custom2</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">AKISMET_KEY</td>\n<td style=\"text-align:center\">[可选]Akismet Key 用于垃圾评论检测，设为MANUAL_REVIEW开启人工审核，留空不使用反垃圾</td>\n<td style=\"text-align:center\">xxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ADMIN_URL</td>\n<td style=\"text-align:center\">[可选]后台管理地址(<strong>非博客地址</strong>)</td>\n<td style=\"text-align:center\"><a href=\"https://xxxx.leanapp.cn/\">https://xxxx.leanapp.cn/</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">COMMENT</td>\n<td style=\"text-align:center\">[可选]评论div的ID名</td>\n<td style=\"text-align:center\">#post-comment</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SCKEY</td>\n<td style=\"text-align:center\">[可选]server酱的SCKEY</td>\n<td style=\"text-align:center\">xxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">AKISMET_KEY</td>\n<td style=\"text-align:center\">[可选]Akismet Key 用于垃圾评论检测</td>\n<td style=\"text-align:center\">xxxxxxxxxxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QMSG_KEY</td>\n<td style=\"text-align:center\">[可选]Qmsg酱的密钥</td>\n<td style=\"text-align:center\">xxxxx</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ</td>\n<td style=\"text-align:center\">[可选]Qmsg酱发送的qq，不填为全部。支持多个，用英文逗号分隔即可</td>\n<td style=\"text-align:center\">535668586</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">DISABLE_EMAIL</td>\n<td style=\"text-align:center\">[可选]，填写则代表停止发送邮件</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">QQ_SHAKE</td>\n<td style=\"text-align:center\">[可选]，填写代表发送QQ戳一戳</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">ICP</td>\n<td style=\"text-align:center\">[可选]备案信息，直接填写即可。</td>\n<td style=\"text-align:center\">京ICP备19022312号</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">INFO</td>\n<td style=\"text-align:center\">[可选]自定义信息输出，支持HTML代码</td>\n<td style=\"text-align:center\"><code>&lt;p style='color:red'&gt;test&lt;p&gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">favicon</td>\n<td style=\"text-align:center\">[可选]网页favicon图标</td>\n<td style=\"text-align:center\"><a href=\"https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO/butterfly/img/favicon.ico\">https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO/butterfly/img/favicon.ico</a></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SPAM_WORDS</td>\n<td style=\"text-align:center\">[可选]需要对屏蔽的关键词，关键词用半角逗号分隔</td>\n<td style=\"text-align:center\">单号,物流</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MAIN_COLOR</td>\n<td style=\"text-align:center\">[可选]仅针对<code>custom2</code>模板主题的主要颜色</td>\n<td style=\"text-align:center\">#ff9191</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">MAIN_IMG</td>\n<td style=\"text-align:center\">[可选]仅针对<code>custom2</code>模板主题的头图</td>\n<td style=\"text-align:center\"><code>https://bing.rthe.net/wallpaper</code></td>\n</tr>\n</tbody>\n</table>\n<p>当使用自定义邮件服务器时（需将<code>SMTP_SERVICE</code>变量删掉哦！）</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">变量名</th>\n<th style=\"text-align:center\">说明</th>\n<th style=\"text-align:center\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">SMTP_HOST</td>\n<td style=\"text-align:center\">邮件服务提供商 SMTP 地址，此项需要自行查询或询问其服务商。</td>\n<td style=\"text-align:center\"><code>smtp.ym.163.com</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_PORT</td>\n<td style=\"text-align:center\">邮件服务提供商 SMTP 端口, <em>此项需要自行查询或询问其服务商</em>。</td>\n<td style=\"text-align:center\">994</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">SMTP_SECURE</td>\n<td style=\"text-align:center\">是否启用加密, 默认为 <code>true</code>，一般不需要设置，如有特殊请自行配置。 <em>此项需要自行查询或询问其服务商</em>。</td>\n<td style=\"text-align:center\">true</td>\n</tr>\n</tbody>\n</table>\n<p>此项目的主题字段</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">主题</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">default</td>\n<td style=\"text-align:center\">默认主题</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">rainbow</td>\n<td style=\"text-align:center\">原版的rainbow</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">custom1</td>\n<td style=\"text-align:center\">基于<a href=\"https://pbas.club/\">🎉梨花町の肾兄さん🎉</a>的模板</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">custom2</td>\n<td style=\"text-align:center\">对custom1的改进版</td>\n</tr>\n</tbody>\n</table>\n</li>\n<li>\n<p>添加完成后，点击保存。并且重新部署实例。</p>\n<p>我这里以最简设置为例，请各位博主认真看每个变量的含义最后决定要不要设置。</p>\n<p><img src=\"upload/image-20200516173737785.png\" alt=\"\" /></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/a4c1045400ca9fb6bb140721500ded60.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>初始化后台管理</p>\n<p><em>如果你没有设置后台域名</em>，即没有做第四步。那么也可以跳过这一步。</p>\n<p>打开绑定的域名+<code>/sign-up</code>，例如我的域名为<code>https://xiaokang.avosapps.us/</code>，那么我访问的地址就是<code>https://xiaokang.avosapps.us/sign-up</code>。接下来设置你的登录信息。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/5400ad48e47704d503e994680715cf5c.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>登录后台</p>\n<p>接下来就可以用刚才的邮箱或者登录名登录了。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/16/e14cce66e98ababc5f7099ba4403457a.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>基本完成了设置</p>\n<p>到这里基本上完成了valine-admin的基本设置。如果你觉得我的项目还不错，可以为我点个star哦！</p>\n</li>\n</ol>\n<h2 id=\"防止服务器休眠\"><a class=\"markdownIt-Anchor\" href=\"#防止服务器休眠\"></a> 防止服务器休眠</h2>\n<p>关于自动休眠的官方说法：<a href=\"https://leancloud.cn/docs/leanengine_plan.html#hash633315134\">点击查看</a></p>\n<p>关于服务器休眠唤醒的问题，以前的方法是通过自带的定时任务进行唤醒，但现在不可以了，因为官方进行限制了。因此对于服务器的自唤醒可以参考<a href=\"https://www.antmoe.com/posts/ff6aef7b/index.html\">优雅解决LeanCloud流控问题</a>这篇文章进行解决。</p>\n<p>至于重发函数，还是和往常一样，但由于流控限制，因此最好能保证重发时机器是活着的。不然很可能会触发<em>因流控原因，通过定时任务唤醒体验版实例失败，建议升级至标准版云引擎实例避免休眠</em></p>\n<p>选择resend-mails云函数，Cron表达式为<code>0 59 7 * * *</code>，表示每天早8点20分检查过去24小时内漏发的通知邮件并补发（请尽量确保你设置的时间机器是醒着的）：</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/03/31/98657c0fe57e93ee81d53bc1aa056a02.png\" alt=\"\" /></p>\n<h2 id=\"使用问题\"><a class=\"markdownIt-Anchor\" href=\"#使用问题\"></a> 使用问题</h2>\n<p>此项目是在原项目的基础上进行的二次开发（<s>其实并不是开发，只是添加一个请求而已</s>）。所以使用上可能会遇到一些问题，因此遇到问题可以在下方留言,或者给我发送Email。</p>\n<h3 id=\"添加丰富的评论表情\"><a class=\"markdownIt-Anchor\" href=\"#添加丰富的评论表情\"></a> 添加丰富的评论表情</h3>\n<p>参考：<a href=\"https://www.antmoe.com/posts/284f2e1c/index.html\">Valine如何添加多个表情</a></p>\n<h3 id=\"无法登录后台\"><a class=\"markdownIt-Anchor\" href=\"#无法登录后台\"></a> 无法登录后台</h3>\n<p>这个主要原因是因为后台验证机制变了，只需要访问你的后台管理的域名+sign-up即可。</p>\n<p>例如我的后台管理地址为<code>www.antmoe.com</code>那么我访问的地址就是<code>www.antmoe.com/sign-up</code></p>\n<center><font color=red size=5><b>原创文章，转载请标明出处。</b></font></center>\n<h2 id=\"更新说明\"><a class=\"markdownIt-Anchor\" href=\"#更新说明\"></a> 更新说明</h2>\n<ul>\n<li>\n<p>2020-06-24</p>\n<p><code>A</code> 关键词屏蔽字段</p>\n</li>\n<li>\n<p>2020-06-20</p>\n<p><code>A</code> 增加<code>favicon</code>字段</p>\n</li>\n<li>\n<p>2020-06-10</p>\n<p><code>A</code>添加了头图自定义（仅限<code>custom2</code>主题）</p>\n<p><code>A</code>添加了模板主要颜色自定义（仅限<code>custom2</code>主题）</p>\n</li>\n<li>\n<p>2020-05-17</p>\n<p><code>A</code>添加页脚自定义信息（支持HTML代码）</p>\n<p><code>A</code>添加备案信息行</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/05/17/1cdee418510f0e8defb7a4848b9e5d1a.png\" alt=\"image-20200517192601574\" /></p>\n</li>\n<li>\n<p>2020-05-15</p>\n<p><code>A</code>适配国际版时间问题</p>\n<p><code>A</code>添加字段<code>BLOGGER_EMAIL</code></p>\n</li>\n<li>\n<p>2020-04-25</p>\n<p><code>A</code> QQ戳一戳功能<br />\n<code>A</code> 是否开启邮件通知<br />\n<code>F</code> <strong>QMSG字段修改为QMSG_KEY</strong></p>\n</li>\n<li>\n<p>2020-04-20</p>\n<p>添加了qq提醒</p>\n</li>\n<li>\n<p>2020-04-19</p>\n<p>基于懒人的版本重新构建（弃用了request）</p>\n</li>\n<li>\n<p>2020-03-31</p>\n<p>更新了新内容，整合了垃圾评论功能。</p>\n</li>\n<li>\n<p>2020-03-24</p>\n<p>对前一套模板进行了修改（重要内容用灰色背景显示）</p>\n</li>\n<li>\n<p>2020-03-20</p>\n<ul>\n<li>\n<p>增加了一套新的模板(感谢<a href=\"https://pbas.club/\">🎉梨花町の肾兄さん🎉</a>提供好素材)，模板名为<code>custom1</code></p>\n<img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141052.png\" alt=\"提醒博主\" width=\"25%\"/>\n<img src=\"https://cdn.jsdelivr.net/gh/blogimg/HexoStaticFile1/imgbed/2020/03/20/20200320141253.png\" alt=\"博主回复\" width=\"25%\"/>\n</li>\n</ul>\n</li>\n<li>\n<p>2020-02-16</p>\n<ul>\n<li>第一次发布，增加了微信server酱提醒</li>\n</ul>\n</li>\n</ul>\n<script src=\"https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/js/WithoutLine.min.js\"></script>","categories":[{"name":"Hexo","path":"api/categories/Hexo.json"},{"name":"Valine评论","path":"api/categories/Valine评论.json"}],"tags":[{"name":"Hexo","path":"api/tags/Hexo.json"},{"name":"valine-admin","path":"api/tags/valine-admin.json"},{"name":"评论提醒","path":"api/tags/评论提醒.json"}]}